YUI.add("gallery-linkedlist",function(e,t){"use strict";function n(e){this.value=e,this._prev=this._next=null}function r(e){this._list=e,this.moveToBeginning()}function i(t){this._head=this._tail=null,arguments.length>1?t=e.Array(arguments):!e.Lang.isUndefined(t)&&!(t instanceof i)&&!e.Array.test(t)&&(t=e.Array(t)),e.Lang.isUndefined(t)||e.each(t,function(e){this.append(e)},this)}function s(e){return e instanceof n?this.remove(e):e=new n(e),e}n.prototype={prev:function(){return this._prev},next:function(){return this._next}},e.LinkedListItem=n,r.prototype={atBeginning:function(){return!this._next||!this._at_end&&!this._next._prev},atEnd:function(){return!this._next||this._at_end},moveToBeginning:function(){this._next=this._list._head,this._at_end=!this._next},moveToEnd:function(){this._next=this._list._tail,this._at_end=!0},next:function(){if(this._at_end)return;var e=this._next;this._next&&this._next._next?this._next=this._next._next:this._at_end=!0;if(e)return e.value},prev:function(){var e;this._at_end?(this._at_end=!1,e=this._next):this._next&&(e=this._next._prev,e&&(this._next=e));if(e)return e.value},insert:function(e){return this._at_end||!this._next?this._next=this._list.append(e):this._next=this._list.insertBefore(e,this._next),this._next},removePrev:function(){var e;this._at_end?(e=this._next,this._next&&(this._next=this._next._prev)):this._next&&(e=this._next._prev);if(e)return this._list.remove(e),e},removeNext:function(){var e;this._next&&!this._at_end&&(e=this._next,this._next&&this._next._next?this._next=this._next._next:(this._next=this._next?this._next._prev:null,this._at_end=!0));if(e)return this._list.remove(e),e}},i.prototype={isEmpty:function(){return!this._head&&!this._tail},size:function(){var e=0,t=this._head;while(t)e++,t=t._next;return e},iterator:function(){return new r(this)},newInstance:function(){return new i},head:function(){return this._head},tail:function(){return this._tail},indexOf:function(e){var t=this.iterator(),n=0;while(!t.atEnd()){if(t.next()===e)return n;n++}return-1},lastIndexOf:function(e){var t=this.iterator(),n=this.size();t.moveToEnd();while(!t.atBeginning()){n--;if(t.prev()===e)return n}return-1},clear:function(){this._head=this._tail=null},insertBefore:function(e,t){return e=s.call(this,e),e._prev=t._prev,e._next=t,t._prev?t._prev._next=e:this._head=e,t._prev=e,e},insertAfter:function(e,t){return t=s.call(this,t),t._prev=e,t._next=e._next,e._next?e._next._prev=t:this._tail=t,e._next=t,t},prepend:function(e){return e=s.call(this,e),this.isEmpty()?this._head=this._tail=e:this.insertBefore(e,this._head),e},append:function(e){return e=s.call(this,e),this.isEmpty()?this._head=this._tail=e:this.insertAfter(this._tail,e),e},remove:function(e){e._prev?e._prev._next=e._next:e===this._head&&(this._head=e._next,e._next&&(e._next._prev=null)),e._next?e._next._prev=e._prev:e===this._tail&&(this._tail=e._prev,e._prev&&(e._prev._next=null)),e._prev=e._next=null},reverse:function(){var e=new i,t=this.iterator();while(!t.atEnd()){var n=t.removeNext();e.prepend(n)}this._head=e._head,this._tail=e._tail},toArray:function(){var e=[],t=this._head;while(t)e.push(t.value),t=t._next;return e}},e.mix(i,e.Iterable,!1,null,4),e.LinkedList=i},"@VERSION@",{requires:["gallery-iterable-extras"],optional:["gallery-funcprog"]});
