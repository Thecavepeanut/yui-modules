YUI.add("gallery-node-optimizations",function(E){var D=/^([a-z]*)\.([-_a-z0-9]+)$/i;var F=/^\.([-_a-z0-9]+)$/i;var A=/^[a-z]+$/i;var B=E.Node.prototype.ancestor;E.Node.prototype.ancestor=function(H,I){if(E.Lang.isString(H)){var G=F.exec(H);if(G&&G.length){return this.getAncestorByClassName(G[1],I);}if(A.test(H)){return this.getAncestorByTagName(H,I);}}return B.apply(this,arguments);};E.Node.prototype.getAncestorByClassName=function(H,G){var I=this._node;if(!G){I=I.parentNode;}while(I&&!E.DOM.hasClass(I,H)){I=I.parentNode;if(!I||!I.tagName){return null;}}return E.one(I);};E.Node.prototype.getAncestorByTagName=function(I,G){var H=this._node;if(!G){H=H.parentNode;}I=I.toLowerCase();while(H&&H.tagName.toLowerCase()!=I){H=H.parentNode;if(!H||!H.tagName){return null;}}return E.one(H);};var C=E.Node.prototype.all;E.Node.prototype.all=function(H){if(E.Lang.isString(H)){var G=D.exec(H);if(G&&G.length){return this.getElementsByClassName(G[2],G[1]);}if(A.test(H)){return this.getElementsByTagName(H);}}return C.apply(this,arguments);};E.Node.prototype.getElementsByClassName=function(J,L){var M=this.getElementsByTagName(L||"*");var I=null;var H=M.size();for(var G=0;G<H;G++){var K=M.item(G);if(E.DOM.hasClass(E.Node.getDOMNode(K),J)){if(!I){I=new E.NodeList(K);}else{I.push(K);}}}if(!I){I=new E.NodeList("#surely-this-cannot-possibly-exist-on-your-page");}return I;};},"@VERSION@",{requires:["node-base"]});