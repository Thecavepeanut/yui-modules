YUI.add("gallery-bt-viewer",function(e,t){var n="widthChange",r="bvi_",i={IMAGE:r+"image",BOTTON:r+"botton",EXPAND:r+"expand"},s='<span class="'+i.BOTTON+'"></span>',o=function(e){e.get("naturalWidth")>e.get("offsetWidth")&&e.insert(s,"before")},u=function(e){var t=e.currentTarget,n=t.next("."+i.IMAGE);e.preventDefault(),t.toggleClass(i.EXPAND),n.toggleClass(i.EXPAND),this._uiDimensionsChange(),this.syncScroll()},a=e.Base.create("btviewer",e.ScrollView,[e.Bottle.SyncScroll,e.zui.Attribute],{initializer:function(){try{this.setAttrs({flick:!1,bounce:0}),this.setAttrs(e.JSON.parse(this.get("contentBox").getData("cfg-scroll")))}catch(t){}this.set("syncScrollMethod",this._uiDimensionsChange)},destructor:function(){this.unplug(e.zui.RAScroll),this._bviEventHandlers.detach(),delete this._bviEventHandlers},renderUI:function(){var t=this.get("contentBox"),n=this.get("imageNode"),r=this;this.plug(e.zui.RAScroll),this.unplug(e.Plugin.ScrollViewScrollbars),e.Bottle.Device.getTouchSupport()||this.plug(e.zui.ScrollHelper),n.addClass(i.IMAGE),n.each(function(e){e.get("naturalWidth")?o(e):e.once("load",function(e){o(e.target),r._uiDimensionsChange()})}),this._bviEventHandlers=new e.EventHandle([t.delegate("click",u,"."+i.BOTTON,this)]),e.once("btNative",this._nativeScroll,this)},_nativeScroll:function(){this._prevent={move:!1,start:!1,end:!1}}},{ATTRS:{imageNode:{writeOnce:!0,lazyAdd:!1,setter:function(e){return this._imageCSS=e,this.get("contentBox").all(e)}}},HTML_PARSER:{imageNode:function(e){return e.getData("image-node")||"img"}}});e.namespace("Bottle").Viewer=a},"gallery-2012.12.05-21-01",{requires:["gallery-bt-syncscroll","gallery-zui-rascroll","gallery-zui-attribute","gallery-zui-scrollhelper"]});
