YUI.add("gallery-accordion-horiz-vert",function(B){var L=(0<B.UA.ie&&B.UA.ie<8),N=!(0<B.UA.ie&&B.UA.ie<8),Q=(L?1:0);function M(R){R=R||{};if(B.Lang.isUndefined(R.tabIndex)){R.tabIndex=null;}if(B.Lang.isUndefined(R.horizontal)){R.horizontal=false;}M.superclass.constructor.call(this,R);}function G(){return !B.Lang.isUndefined(B.Anim);}function J(R){return(R&&N&&!B.Lang.isUndefined(B.Anim));}M.NAME="accordion";M.ATTRS={horizontal:{value:false,writeOnce:true},titles:{writeOnce:true},replaceTitleContainer:{value:true,validator:B.Lang.isBoolean},sections:{writeOnce:true},replaceSectionContainer:{value:true,validator:B.Lang.isBoolean},allowAllClosed:{value:false,validator:B.Lang.isBoolean,setter:function(R){this.allow_all_closed=R;return R;}},allowMultipleOpen:{value:false,validator:B.Lang.isBoolean},animateRender:{value:false,writeOnce:true,validator:B.Lang.isBoolean,setter:J},animateInsertRemove:{valueFn:G,validator:B.Lang.isBoolean,setter:J},animateOpenClose:{valueFn:G,validator:B.Lang.isBoolean,setter:J},animateDuration:{value:null,validator:function(R){return(R===null||B.Lang.isNumber(R));}},animateEasing:{value:null,validator:function(R){return(R===null||B.Lang.isFunction(R));}}};M.HTML_PARSER={titles:function(R){return R.all("li > div:nth-child(1)");},sections:function(R){return R.all("li > div:nth-child(2)");}};var A=B.ClassNameManager.getClassName(M.NAME,"open");var F=B.ClassNameManager.getClassName(M.NAME,"closed");function O(R){B.Event.purgeElement(R,true);while(R.hasChildNodes()){R.removeChild(R.lastChild);}}B.extend(M,B.Widget,{initializer:function(R){this.section_list=[];this.get("allowAllClosed");if(this.get("horizontal")){this.slide_style_name="width";this.slide_size_name="offsetWidth";this.fixed_style_name="height";this.fixed_size_name="offsetHeight";}else{this.slide_style_name="height";this.slide_size_name="offsetHeight";this.fixed_style_name="width";this.fixed_size_name="offsetWidth";}this.after("allowMultipleOpenChange",function(S){if(this.section_list&&this.section_list.length>0&&!S.newVal){this.closeAllSections();}});this.after("allowAllClosedChange",function(S){if(this.section_list&&this.section_list.length>0&&!S.newVal&&this.allSectionsClosed()){this.toggleSection(0);}});},renderUI:function(){this.get("boundingBox").addClass(this.getClassName(this.get("horizontal")?"horiz":"vert"));var U=this.get("titles");if(B.Lang.isString(U)){U=B.all(U);}var V=this.get("sections");if(B.Lang.isString(V)){V=B.all(V);}if(U instanceof B.NodeList&&V instanceof B.NodeList&&U.size()==V.size()){var S=this.get("animateInsertRemove");this.set("animateInsertRemove",this.get("animateRender"));var T=U.size();for(var R=0;R<T;R++){this.appendSection(U.item(R),V.item(R));}this.set("animateInsertRemove",S);}else{if(U instanceof Array&&V instanceof Array&&U.length==V.length){var S=this.get("animateInsertRemove");this.set("animateInsertRemove",this.get("animateRender"));var T=U.length;for(var R=0;R<T;R++){this.appendSection(U[R],V[R]);}this.set("animateInsertRemove",S);}else{}}this.get("contentBox").all("> li").remove();},getSectionCount:function(){return this.section_list.length;},getTitle:function(R){return this.section_list[R].title;},setTitle:function(R,V){var S=this.section_list[R].title;O(S);var T;if(B.Lang.isString(V)){var T=B.one(V);if(!T){S.set("innerHTML",V);}}else{T=V;}if(T&&this.get("replaceTitleContainer")){var U=S.get("parentNode");var W=S.get("nextSibling");U.removeChild(S);if(W){U.insertBefore(T,W);}else{U.appendChild(T);}this.section_list[R].title=T;T.addClass(this.getClassName("title"));T.addClass(this.section_list[R].open?A:F);}else{if(T){S.appendChild(T);}}if(L){S.setStyle("display",S.get("innerHTML")?"":"none");}},getSection:function(R){return this.section_list[R].content;},setSection:function(R,T){var W=this.section_list[R].content;O(W);var S;if(B.Lang.isString(T)){var S=B.one(T);if(!S){W.set("innerHTML",T);}}else{S=T;}if(S&&this.get("replaceSectionContainer")){var V=W.getStyle("display");var U=W.get("parentNode");var X=W.get("nextSibling");U.removeChild(W);if(X){U.insertBefore(S,X);}else{U.appendChild(S);}this.section_list[R].content=S;S.addClass(this.getClassName("section"));S.addClass(this.section_list[R].open?A:F);S.setStyle("display",V);}else{if(S){W.appendChild(S);}}},_getClip:function(R){return this.section_list[R].clip;},prependSection:function(S,R){return this.insertSection(0,S,R);},appendSection:function(S,R){return this.insertSection(this.section_list.length,S,R);},insertSection:function(T,X,U){this.fire("beforeInsert",T);var Y=B.Node.create("<div/>");Y.addClass(this.getClassName("title"));Y.addClass(F);var W=B.Node.create("<div/>");W.addClass(this.getClassName("section-clip"));W.setStyle(this.slide_style_name,Q+"px");if(this.get("animateOpenClose")){W.setStyle("opacity",0);}var V=B.Node.create("<div/>");V.addClass(this.getClassName("section"));V.addClass(F);V.setStyle("display","none");W.appendChild(V);this.section_list.splice(T,0,{title:Y,clip:W,content:V,open:false,anim:null});if(T<this.section_list.length-1){this.get("contentBox").insertBefore(Y,this.section_list[T+1].title);}else{this.get("contentBox").appendChild(Y);}this.setTitle(T,X);Y=this.section_list[T].title;var Z=Y.get(this.slide_size_name);if(this.get("animateInsertRemove")){Y.setStyle(this.slide_style_name,Q+"px");var S={node:Y,from:{opacity:0},to:{opacity:1}};S.to[this.slide_style_name]=Z;var R=this._createAnimator(S);R.on("end",function(b,a){this.section_list[a].title.setStyle(this.slide_style_name,"auto");},this,T);R.run();}if(U){this.setSection(T,U);V=this.section_list[T].content;}if(T<this.section_list.length-1){this.get("contentBox").insertBefore(W,this.section_list[T+1].title);}else{this.get("contentBox").appendChild(W);}this.fire("insert",T,Z);if(!this.allow_all_closed&&this.allSectionsClosed()){this.toggleSection(0);}return{title:Y,content:V};},removeSection:function(T){this.fire("beforeRemove",T);function R(X,W){W[0].removeChild(W[1]);W[0].removeChild(W[2]);if(W[3]){this.fire("remove",T);}}var S=[this.get("contentBox"),this.section_list[T].title,this.section_list[T].clip,true];
if(this.get("animateInsertRemove")){var V={node:this.section_list[T].clip,from:{opacity:1},to:{opacity:0}};V.to[this.slide_style_name]=Q;if(this.section_list[T].open){this._startAnimator(T,V);}V.node=this.section_list[T].title;var U=this._createAnimator(V);U.on("end",R,this,S);U.run();}else{S[3]=false;R.call(this,null,S);}this.section_list.splice(T,1);if(!S[3]){this.fire("remove",T);}if(!this.allow_all_closed&&this.allSectionsClosed()){this.toggleSection(0);}},findSection:function(S){S=B.Node.getDOMNode(B.one(S));var U=this.section_list.length;for(var R=0;R<U;R++){var V=B.Node.getDOMNode(this.section_list[R].title);var T=B.Node.getDOMNode(this.section_list[R].content);if(S==V||B.DOM.contains(V,S)||S==T||B.DOM.contains(T,S)){return R;}}return -1;},isSectionOpen:function(R){return this.section_list[R].open;},openSection:function(R){if(!this.section_list[R].open){this.toggleSection(R);}},closeSection:function(R){if(this.section_list[R].open){this.toggleSection(R);}},allSectionsOpen:function(){var S=this.section_list.length;for(var R=0;R<S;R++){if(!this.section_list[R].open){return false;}}return true;},allSectionsClosed:function(){var S=this.section_list.length;for(var R=0;R<S;R++){if(this.section_list[R].open){return false;}}return true;},toggleSection:function(R){if(!this.section_list[R].open&&!this.get("allowMultipleOpen")){var U=this.allow_all_closed;this.allow_all_closed=true;this.closeAllSections();this.allow_all_closed=U;}else{if(this.section_list[R].open&&!this.allow_all_closed){this.section_list[R].open=false;if(this.allSectionsClosed()){this.section_list[R].open=true;return;}this.section_list[R].open=true;}}function W(a,Z){this.section_list[Z].clip.setStyle(this.slide_style_name,"auto");this.fire("open",Z);}function Y(a,Z){this.section_list[Z].content.setStyle("display","none");this.fire("close",Z);}if(!this.section_list[R].open){this.section_list[R].content.setStyle("display","block");this.fire("beforeOpen",R);this.section_list[R].open=true;this.section_list[R].title.replaceClass(F,A);this.section_list[R].content.replaceClass(F,A);var S=this.section_list[R].content.get(this.slide_size_name);if(this.get("animateOpenClose")){var X={node:this.section_list[R].clip,from:{opacity:0},to:{opacity:1}};X.to[this.slide_style_name]=S;var V=this._startAnimator(R,X);V.on("end",W,this,R);}else{var T=this.section_list[R].clip;if(T.getStyle("opacity")=="0"){T.setStyle("opacity",1);}W.call(this,null,R);}}else{this.fire("beforeClose",R);this.section_list[R].open=false;this.section_list[R].title.replaceClass(A,F);this.section_list[R].content.replaceClass(A,F);if(this.get("animateOpenClose")){var X={node:this.section_list[R].clip,from:{opacity:1},to:{opacity:0}};X.to[this.slide_style_name]=Q;var V=this._startAnimator(R,X);V.on("end",Y,this,R);}else{this.section_list[R].clip.setStyle(this.slide_style_name,Q+"px");Y.call(this,null,R);}}},openAllSections:function(){if(this.get("allowMultipleOpen")){var S=this.section_list.length;for(var R=0;R<S;R++){if(!this.section_list[R].open){this.toggleSection(R);}}}},closeAllSections:function(){var S=this.section_list.length;var T=true;for(var R=0;R<S;R++){if(this.section_list[R].open){if(!this.allow_all_closed&&T){T=false;}else{this.toggleSection(R);}}}if(!this.allow_all_closed&&T){this.toggleSection(0);}},_createAnimator:function(S){var R=this.get("animateDuration");if(R!==null){S.duration=R;}var T=this.get("animateEasing");if(T!==null){S.easing=T;}return new B.Anim(S);},_startAnimator:function(R,T){var S=this.section_list[R].anim;if(S){S.stop(true);}this.section_list[R].anim=S=this._createAnimator(T);S.on("end",function(V,U,W){if(U<this.section_list.length&&this.section_list[U].anim==W){this.section_list[U].anim=null;}},this,R,S);S.run();return S;}});B.Accordion=M;function K(){K.superclass.constructor.apply(this,arguments);}K.NAME="FixedSizeAccordionPlugin";K.NS="fixedsize";K.ATTRS={};var I=["animateRender","animateInsertRemove","animateOpenClose"];var E={width:"totalWidth",height:"totalHeight"};var D={width:"overflowX",height:"overflowY"};var H={width:"horizMarginBorderPadding",height:"vertMarginBorderPadding"};function C(R){this.set(R,false);this.modifyAttr(R,{readOnly:true});}function P(){var Z=this.get("host");if(!this.init_fixed_size){B.Array.each(I,C,Z);if(!Z.get("rendered")){this.afterHostEvent("render",P,this);}this.onHostEvent("insert",function(){B.later(1,this,P);},this);this.onHostEvent("remove",P,this);this.onHostEvent("open",P,this);this.onHostEvent("close",P,this);this.init_fixed_size=true;}var T=Z.slide_style_name;var W=Z.get("boundingBox").parseDimensionStyle(T);var V=Z.getSectionCount();var U=[];for(var S=0;S<V;S++){W-=Z.getTitle(S)[E[T]]();if(Z.isSectionOpen(S)){U.push(S);}}V=U.length;var a=Math.floor(W/V);var R=W%V;for(S=0;S<V;S++){var X=Z.getSection(U[S]);var Y=a-X[H[T]]();if(S===V-1){Y+=R;}X.setStyle(T,Y+"px");X.setStyle(D[T],"auto");}}B.extend(K,B.Plugin.Base,{initializer:function(R){var S=this.get("host");var T=S.slide_style_name;this.init_fixed_size=false;if(S.get(T)){P.call(this);}this.afterHostEvent(T+"Change",function(){B.later(1,this,P);},this);}});B.namespace("Plugin");B.Plugin.FixedSizeAccordion=K;},"@VERSION@",{requires:["widget","selector-css3","plugin","gallery-dimensions"],optional:["anim-base"],skinnable:true});