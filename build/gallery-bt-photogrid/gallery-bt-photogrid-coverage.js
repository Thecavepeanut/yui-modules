if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/gallery-bt-photogrid/gallery-bt-photogrid.js']) {
   __coverage__['build/gallery-bt-photogrid/gallery-bt-photogrid.js'] = {"path":"build/gallery-bt-photogrid/gallery-bt-photogrid.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":32},"end":{"line":1,"column":51}}},"2":{"name":"(anonymous_2)","line":44,"loc":{"start":{"line":44,"column":17},"end":{"line":44,"column":29}}},"3":{"name":"(anonymous_3)","line":66,"loc":{"start":{"line":66,"column":16},"end":{"line":66,"column":28}}},"4":{"name":"(anonymous_4)","line":71,"loc":{"start":{"line":71,"column":14},"end":{"line":71,"column":26}}},"5":{"name":"(anonymous_5)","line":81,"loc":{"start":{"line":81,"column":12},"end":{"line":81,"column":28}}},"6":{"name":"(anonymous_6)","line":95,"loc":{"start":{"line":95,"column":20},"end":{"line":95,"column":44}}},"7":{"name":"(anonymous_7)","line":112,"loc":{"start":{"line":112,"column":43},"end":{"line":112,"column":56}}},"8":{"name":"(anonymous_8)","line":138,"loc":{"start":{"line":138,"column":40},"end":{"line":138,"column":53}}},"9":{"name":"(anonymous_9)","line":154,"loc":{"start":{"line":154,"column":41},"end":{"line":154,"column":54}}},"10":{"name":"(anonymous_10)","line":179,"loc":{"start":{"line":179,"column":16},"end":{"line":179,"column":28}}},"11":{"name":"(anonymous_11)","line":183,"loc":{"start":{"line":183,"column":49},"end":{"line":183,"column":62}}},"12":{"name":"(anonymous_12)","line":201,"loc":{"start":{"line":201,"column":18},"end":{"line":201,"column":35}}},"13":{"name":"(anonymous_13)","line":239,"loc":{"start":{"line":239,"column":20},"end":{"line":239,"column":39}}},"14":{"name":"(anonymous_14)","line":268,"loc":{"start":{"line":268,"column":28},"end":{"line":268,"column":44}}},"15":{"name":"(anonymous_15)","line":317,"loc":{"start":{"line":317,"column":23},"end":{"line":317,"column":36}}},"16":{"name":"(anonymous_16)","line":320,"loc":{"start":{"line":320,"column":20},"end":{"line":320,"column":33}}},"17":{"name":"(anonymous_17)","line":334,"loc":{"start":{"line":334,"column":23},"end":{"line":334,"column":36}}},"18":{"name":"(anonymous_18)","line":373,"loc":{"start":{"line":373,"column":20},"end":{"line":373,"column":39}}},"19":{"name":"(anonymous_19)","line":376,"loc":{"start":{"line":376,"column":21},"end":{"line":376,"column":40}}},"20":{"name":"(anonymous_20)","line":379,"loc":{"start":{"line":379,"column":18},"end":{"line":379,"column":37}}},"21":{"name":"(anonymous_21)","line":382,"loc":{"start":{"line":382,"column":20},"end":{"line":382,"column":39}}},"22":{"name":"(anonymous_22)","line":385,"loc":{"start":{"line":385,"column":19},"end":{"line":385,"column":38}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":394,"column":57}},"2":{"start":{"line":10,"column":0},"end":{"line":389,"column":3}},"3":{"start":{"line":45,"column":8},"end":{"line":45,"column":30}},"4":{"start":{"line":47,"column":8},"end":{"line":47,"column":58}},"5":{"start":{"line":54,"column":8},"end":{"line":54,"column":38}},"6":{"start":{"line":63,"column":8},"end":{"line":64,"column":4}},"7":{"start":{"line":67,"column":8},"end":{"line":67,"column":40}},"8":{"start":{"line":68,"column":8},"end":{"line":68,"column":38}},"9":{"start":{"line":72,"column":8},"end":{"line":72,"column":34}},"10":{"start":{"line":82,"column":8},"end":{"line":82,"column":36}},"11":{"start":{"line":84,"column":8},"end":{"line":84,"column":114}},"12":{"start":{"line":85,"column":8},"end":{"line":85,"column":32}},"13":{"start":{"line":96,"column":8},"end":{"line":99,"column":47}},"14":{"start":{"line":101,"column":8},"end":{"line":110,"column":9}},"15":{"start":{"line":109,"column":12},"end":{"line":109,"column":33}},"16":{"start":{"line":112,"column":8},"end":{"line":161,"column":17}},"17":{"start":{"line":113,"column":12},"end":{"line":121,"column":27}},"18":{"start":{"line":123,"column":12},"end":{"line":125,"column":13}},"19":{"start":{"line":124,"column":16},"end":{"line":124,"column":23}},"20":{"start":{"line":127,"column":12},"end":{"line":127,"column":75}},"21":{"start":{"line":129,"column":12},"end":{"line":133,"column":13}},"22":{"start":{"line":130,"column":16},"end":{"line":130,"column":37}},"23":{"start":{"line":132,"column":16},"end":{"line":132,"column":40}},"24":{"start":{"line":135,"column":12},"end":{"line":158,"column":13}},"25":{"start":{"line":136,"column":16},"end":{"line":136,"column":38}},"26":{"start":{"line":138,"column":16},"end":{"line":152,"column":26}},"27":{"start":{"line":139,"column":20},"end":{"line":139,"column":37}},"28":{"start":{"line":141,"column":20},"end":{"line":149,"column":21}},"29":{"start":{"line":142,"column":24},"end":{"line":142,"column":51}},"30":{"start":{"line":143,"column":24},"end":{"line":143,"column":54}},"31":{"start":{"line":144,"column":24},"end":{"line":144,"column":57}},"32":{"start":{"line":145,"column":24},"end":{"line":145,"column":55}},"33":{"start":{"line":147,"column":24},"end":{"line":147,"column":54}},"34":{"start":{"line":148,"column":24},"end":{"line":148,"column":52}},"35":{"start":{"line":151,"column":20},"end":{"line":151,"column":42}},"36":{"start":{"line":154,"column":16},"end":{"line":157,"column":26}},"37":{"start":{"line":155,"column":20},"end":{"line":155,"column":38}},"38":{"start":{"line":156,"column":20},"end":{"line":156,"column":42}},"39":{"start":{"line":160,"column":12},"end":{"line":160,"column":31}},"40":{"start":{"line":170,"column":8},"end":{"line":170,"column":33}},"41":{"start":{"line":180,"column":8},"end":{"line":181,"column":17}},"42":{"start":{"line":183,"column":8},"end":{"line":190,"column":11}},"43":{"start":{"line":184,"column":12},"end":{"line":184,"column":42}},"44":{"start":{"line":186,"column":12},"end":{"line":189,"column":13}},"45":{"start":{"line":187,"column":16},"end":{"line":187,"column":25}},"46":{"start":{"line":188,"column":16},"end":{"line":188,"column":25}},"47":{"start":{"line":192,"column":8},"end":{"line":192,"column":20}},"48":{"start":{"line":202,"column":8},"end":{"line":203,"column":36}},"49":{"start":{"line":205,"column":8},"end":{"line":207,"column":9}},"50":{"start":{"line":206,"column":12},"end":{"line":206,"column":19}},"51":{"start":{"line":209,"column":8},"end":{"line":209,"column":34}},"52":{"start":{"line":211,"column":8},"end":{"line":216,"column":9}},"53":{"start":{"line":212,"column":12},"end":{"line":212,"column":39}},"54":{"start":{"line":213,"column":12},"end":{"line":213,"column":30}},"55":{"start":{"line":214,"column":12},"end":{"line":214,"column":39}},"56":{"start":{"line":215,"column":12},"end":{"line":215,"column":19}},"57":{"start":{"line":218,"column":8},"end":{"line":218,"column":49}},"58":{"start":{"line":220,"column":8},"end":{"line":227,"column":9}},"59":{"start":{"line":221,"column":12},"end":{"line":223,"column":13}},"60":{"start":{"line":222,"column":16},"end":{"line":222,"column":69}},"61":{"start":{"line":224,"column":12},"end":{"line":224,"column":49}},"62":{"start":{"line":225,"column":12},"end":{"line":225,"column":35}},"63":{"start":{"line":226,"column":12},"end":{"line":226,"column":22}},"64":{"start":{"line":229,"column":8},"end":{"line":229,"column":48}},"65":{"start":{"line":240,"column":8},"end":{"line":248,"column":14}},"66":{"start":{"line":250,"column":8},"end":{"line":266,"column":9}},"67":{"start":{"line":252,"column":12},"end":{"line":252,"column":51}},"68":{"start":{"line":253,"column":12},"end":{"line":253,"column":35}},"69":{"start":{"line":261,"column":12},"end":{"line":261,"column":33}},"70":{"start":{"line":263,"column":12},"end":{"line":265,"column":13}},"71":{"start":{"line":264,"column":16},"end":{"line":264,"column":31}},"72":{"start":{"line":268,"column":8},"end":{"line":270,"column":11}},"73":{"start":{"line":269,"column":12},"end":{"line":269,"column":44}},"74":{"start":{"line":272,"column":8},"end":{"line":272,"column":26}},"75":{"start":{"line":274,"column":8},"end":{"line":284,"column":9}},"76":{"start":{"line":282,"column":12},"end":{"line":282,"column":34}},"77":{"start":{"line":283,"column":12},"end":{"line":283,"column":36}},"78":{"start":{"line":318,"column":16},"end":{"line":318,"column":35}},"79":{"start":{"line":321,"column":16},"end":{"line":321,"column":29}},"80":{"start":{"line":335,"column":16},"end":{"line":335,"column":51}},"81":{"start":{"line":374,"column":12},"end":{"line":374,"column":50}},"82":{"start":{"line":377,"column":12},"end":{"line":377,"column":51}},"83":{"start":{"line":380,"column":12},"end":{"line":380,"column":48}},"84":{"start":{"line":383,"column":12},"end":{"line":383,"column":50}},"85":{"start":{"line":386,"column":12},"end":{"line":386,"column":49}},"86":{"start":{"line":391,"column":0},"end":{"line":391,"column":44}}},"branchMap":{"1":{"line":84,"type":"cond-expr","locations":[{"start":{"line":84,"column":62},"end":{"line":84,"column":102}},{"start":{"line":84,"column":105},"end":{"line":84,"column":106}}]},"2":{"line":96,"type":"cond-expr","locations":[{"start":{"line":96,"column":30},"end":{"line":96,"column":45}},{"start":{"line":96,"column":48},"end":{"line":96,"column":50}}]},"3":{"line":99,"type":"binary-expr","locations":[{"start":{"line":99,"column":16},"end":{"line":99,"column":20}},{"start":{"line":99,"column":24},"end":{"line":99,"column":46}}]},"4":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":8},"end":{"line":101,"column":8}},{"start":{"line":101,"column":8},"end":{"line":101,"column":8}}]},"5":{"line":123,"type":"if","locations":[{"start":{"line":123,"column":12},"end":{"line":123,"column":12}},{"start":{"line":123,"column":12},"end":{"line":123,"column":12}}]},"6":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":12},"end":{"line":129,"column":12}},{"start":{"line":129,"column":12},"end":{"line":129,"column":12}}]},"7":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":12},"end":{"line":135,"column":12}},{"start":{"line":135,"column":12},"end":{"line":135,"column":12}}]},"8":{"line":135,"type":"binary-expr","locations":[{"start":{"line":135,"column":16},"end":{"line":135,"column":29}},{"start":{"line":135,"column":33},"end":{"line":135,"column":45}}]},"9":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":20},"end":{"line":141,"column":20}},{"start":{"line":141,"column":20},"end":{"line":141,"column":20}}]},"10":{"line":186,"type":"if","locations":[{"start":{"line":186,"column":12},"end":{"line":186,"column":12}},{"start":{"line":186,"column":12},"end":{"line":186,"column":12}}]},"11":{"line":205,"type":"if","locations":[{"start":{"line":205,"column":8},"end":{"line":205,"column":8}},{"start":{"line":205,"column":8},"end":{"line":205,"column":8}}]},"12":{"line":205,"type":"binary-expr","locations":[{"start":{"line":205,"column":12},"end":{"line":205,"column":17}},{"start":{"line":205,"column":21},"end":{"line":205,"column":39}}]},"13":{"line":211,"type":"if","locations":[{"start":{"line":211,"column":8},"end":{"line":211,"column":8}},{"start":{"line":211,"column":8},"end":{"line":211,"column":8}}]},"14":{"line":220,"type":"if","locations":[{"start":{"line":220,"column":8},"end":{"line":220,"column":8}},{"start":{"line":220,"column":8},"end":{"line":220,"column":8}}]},"15":{"line":220,"type":"binary-expr","locations":[{"start":{"line":220,"column":12},"end":{"line":220,"column":21}},{"start":{"line":220,"column":25},"end":{"line":220,"column":34}}]},"16":{"line":221,"type":"if","locations":[{"start":{"line":221,"column":12},"end":{"line":221,"column":12}},{"start":{"line":221,"column":12},"end":{"line":221,"column":12}}]},"17":{"line":247,"type":"binary-expr","locations":[{"start":{"line":247,"column":21},"end":{"line":247,"column":28}},{"start":{"line":247,"column":32},"end":{"line":247,"column":56}}]},"18":{"line":250,"type":"if","locations":[{"start":{"line":250,"column":8},"end":{"line":250,"column":8}},{"start":{"line":250,"column":8},"end":{"line":250,"column":8}}]},"19":{"line":269,"type":"cond-expr","locations":[{"start":{"line":269,"column":37},"end":{"line":269,"column":38}},{"start":{"line":269,"column":41},"end":{"line":269,"column":42}}]},"20":{"line":274,"type":"if","locations":[{"start":{"line":274,"column":8},"end":{"line":274,"column":8}},{"start":{"line":274,"column":8},"end":{"line":274,"column":8}}]},"21":{"line":335,"type":"cond-expr","locations":[{"start":{"line":335,"column":38},"end":{"line":335,"column":42}},{"start":{"line":335,"column":45},"end":{"line":335,"column":50}}]}},"code":["(function () { YUI.add('gallery-bt-photogrid', function (Y, NAME) {","","/**"," * Provide PhotoGrid class to rendering a lot of photo in many kinds of layout"," *"," * @module gallery-bt-photogrid"," * @static"," */","","var WIDTH_CHANGE = 'widthChange',","    COLUMN_CHANGE = 'columnWidthChange',","    RENDER_FINISHED = 'renderFinished',","","    RENDER_INTERVAL = 100,","","    PREFIX = 'bpg_',","","    CLASSES = {","        COLUMN: PREFIX + 'column',","        MODULE: PREFIX + 'module'","    },","","    HTMLS = {","        COLUMN: '<div class=\"' + CLASSES.COLUMN + '\"></div>'","    },","","    GRID_CFGS = {","        vertical: 1,","        horizontal: 1","    },","","/**"," * PhotoGrid is a Widget which can help you to render a lot of photo in different patterns."," *"," * @class PhotoGrid"," * @constructor"," * @namespace Bottle"," * @extends Widget"," * @uses Bottle.SyncScroll"," * @param [config] {Object} Object literal with initial attribute values",""," */","PhotoGrid = Y.Base.create('btphotogrid', Y.Widget, [Y.Bottle.SyncScroll], {","    initializer: function () {","        this.parseImageData();","","        this.set('syncScrollMethod', this._updateColumns);","","        /**","         * Fired when all grid rendered","         *","         * @event renderFinished","         */","        this.publish(RENDER_FINISHED);","","        /**","         * internal eventhandlers, keep for destructor","         *","         * @property _bpgEventHandlers","         * @type EventHandle","         * @private","         */","        this._bpgEventHandlers = this.after(COLUMN_CHANGE, this._updateColumns)","    },","","    destructor: function () {","        this._bpgEventHandlers.detach();","        delete this._bpgEventHandlers;","    },","","    renderUI: function () {","        this._updateColumns(true);","    },","","    /**","     * append new html into photogrid. the html will be parsed into photogrid then render","     *","     * @method append","     * @param html {String} new html string","     */","    append: function (html) {","        var N = Y.Node.create(html);","","        this.parseImageData((N.getDOMNode().nodeType == 11) ? Y.Node.create('<div>' + html + '</div>') : N, true);","        this.renderImages(true);","    },","","    /**","     * parse image data from a node","     *","     * @method parseImageData","     * @param [node] {Node} node to parse data. If omitted, Widget ContentBox will be used.","     * @param [append=false] {Boolean} <b>true</b> to append data. <b>false</b> or ommited to clean old image data.","     */","    parseImageData: function (node, append) {","        var images = append ? this._bpgImages : [],","            that = this,","            css = this.get('photoNode'),","            P = node || this.get('contentBox');","","        if (!append) {","            /**","             * internal unloaded image count","             *","             * @property _bpgPending","             * @type Number","             * @protected","             */","            this._bpgPending = 0;","        }","","        P.all(this.get('moduleNode')).each(function (O) {","            var image = {","                icon: O.getData('icon'),","                img: O.getData('img'),","                width: O.getData('width'),","                height: O.getData('height'),","                module: O.addClass(CLASSES.MODULE),","                error: false","            },","            P = O.one(css);","","            if (!image.icon) {","                return;","            }","","            image.load = Y.Node.create('<img src=\"' + image.icon + '\" />');","","            if (P) {","                P.append(image.load);","            } else {","                O.insert(image.load, 0);","            }","","            if (!image.height || !image.width) {","                this._bpgPending += 1;","","                image.load.once('load', function (E) {","                    var O = E.target;","","                    if (Y.UA.ie) {","                        image.loadie = new Image();","                        image.loadie.src = image.icon;","                        this.height = this.loadie.height;","                        this.width = this.loadie.width;","                    } else {","                        this.height = O.get('height');","                        this.width = O.get('width');","                    }","","                    that._bpgPending -= 1;","                }, image);","","                image.load.once('error', function (E) {","                    this.error = true;","                    that._bpgPending -= 1;","                }, image);","            }","","            images.push(image);","        }, this);","","        /**","         * internal image meta data","         *","         * @property _bpgImages","         * @type Array","         * @protected","         */","        this._bpgImages = images;","    },","","    /**","     * Get the column with minimal height","     *","     * @method _minColumn","     * @protected","     */","    _minColumn: function () {","        var minI = 9999,","            minO;","","        this.get('contentBox').all('> div').each(function (O) {","            var H = O.get('offsetHeight');","","            if (H < minI) {","                minI = H;","                minO = O;","            }","        });","","        return minO;","    },","","    /**","     * rendering images","     *","     * @method renderImages","     * @param [start] {Node} node to parse data. If omitted, Widget ContentBox will be used.","     */","    renderImages: function (start) {","        var img,","            delay = RENDER_INTERVAL;","","        if (start && this._bpgRendering) {","            return;","        }","","        this._bpgRendering = true;","","        if (this._bpgImages.length <= this._bpgRendered) {","            this._bpgRendering = false;","            this.syncScroll();","            this.fire(RENDER_FINISHED);","            return;","        }","","        img = this._bpgImages[this._bpgRendered];","","        if (img.width || img.error) {","            if (img.error) {","                img.load.setAttribute('src', this.get('errorImage'));","            }","            this._minColumn().append(img.module);","            this._bpgRendered += 1;","            delay = 1;","        }","","        Y.later(delay, this, this.renderImages);","    },","","    /**","     * update Widget width with parent node","     *","     * @method _updateColumns","     * @param [refresh] {Boolean} <b>true</b> to clean contencBox","     * @protected","     */","    _updateColumns: function (refresh) {","        var P = this.get('contentBox'),","            W = P.get('offsetWidth'),","            w = this.get('columnWidth'),","            N = Math.round(W / w),","            a = Math.floor(W / N),","            f = W - a * (N - 1),","            HTML = HTMLS.COLUMN,","            render = refresh || (this._bpgColumns !== N),","            I;","","        if (render) {","            // clean content box","            P.all(this.get('moduleNode')).remove();","            P.set('innerHTML', '');","","            /**","             * Keep current computed column number","             *","             * @property _bpgColumns","             * @protected","             */","            this._bpgColumns = N;","","            for (I = 0;I < N;I++) {","                P.append(HTML);","            }","        }","","        P.all('> div').each(function (O, I) {","            O.set('offsetWidth', I ? a : f);","        });","","        this.syncScroll();","","        if (render) {","            /**","             * internal rendered image","             *","             * @property _bpgRendered","             * @type Number","             * @protected","             */","            this._bpgRendered = 0;","            this.renderImages(true);","        }","    }","}, {","    /**","     * Static property used to define the default attribute configuration.","     *","     * @property ATTRS","     * @type Object","     * @static","     * @protected","     */","    ATTRS: {","        /**","         * Default error Image.","         *","         * @attribute errorImage","         * @type String","         * @default 'about:blank'","         */","        errorImage: {","            value: 'http://l.yimg.com/f/i/tw/map/i/cpx.gif',","            validator: Y.Lang.isString","        },","","        /**","         * Default column width. Column number will be decided by Math.round(parentWidth / columnWidth), and then all these columns will be fitted equally.","         *","         * @attribute columnWidth","         * @type Number","         * @default 200","         */","        columnWidth: {","            value: 200,","            validator: function (V) {","                return (V * 1 > 0);","            },","            setter: function (V) {","                return V * 1;","            }","        },","","        /**","         * Rendering mode of PhotoGrid, should be one of: 'vertical', 'horizontal'","         *","         * @attribute gridType","         * @type String","         * @default vertical","         */","        gridType: {","            value: 'vertical',","            validator: function (V) {","                return GRID_CFGS[V] ? true : false;","            }","        },","","        /**","         * Default module child nodes css selector.","         *","         * @attribute moduleNode","         * @type String","         * @default '> div'","         */","        moduleNode: {","            value: '> div',","            validator: Y.Lang.isString","        },","","        /**","         * Default image child node css selector. If can not find the Node, a new image node will be inserted under the module node.","         *","         * @attribute photoNode","         * @type String","         * @default '.img'","         */","        photoNode: {","            value: '.img',","            validator: Y.Lang.isString","        }","    },","","    /**","     * Static property used to define the default HTML parsing rules","     *","     * @property HTML_PARSER","     * @static","     * @protected","     * @type Object","     */","    HTML_PARSER: {","        errorImage: function (srcNode) {","            return srcNode.getData('error-image');","        },","        columnWidth: function (srcNode) {","            return srcNode.getData('column-width');","        },","        gridType: function (srcNode) {","            return srcNode.getData('grid-type');","        },","        moduleNode: function (srcNode) {","            return srcNode.getData('module-node');","        },","        photoNode: function (srcNode) {","            return srcNode.getData('photo-node');","        }","    }","});","","Y.namespace('Bottle').PhotoGrid = PhotoGrid;","","","}, 'gallery-2012.12.05-21-01', {\"requires\": [\"gallery-bt-syncscroll\"]});","","}());"]};
}
var __cov_d6CtHqaByxszP9BkYGf69g = __coverage__['build/gallery-bt-photogrid/gallery-bt-photogrid.js'];
__cov_d6CtHqaByxszP9BkYGf69g.s['1']++;YUI.add('gallery-bt-photogrid',function(Y,NAME){__cov_d6CtHqaByxszP9BkYGf69g.f['1']++;__cov_d6CtHqaByxszP9BkYGf69g.s['2']++;var WIDTH_CHANGE='widthChange',COLUMN_CHANGE='columnWidthChange',RENDER_FINISHED='renderFinished',RENDER_INTERVAL=100,PREFIX='bpg_',CLASSES={COLUMN:PREFIX+'column',MODULE:PREFIX+'module'},HTMLS={COLUMN:'<div class="'+CLASSES.COLUMN+'"></div>'},GRID_CFGS={vertical:1,horizontal:1},PhotoGrid=Y.Base.create('btphotogrid',Y.Widget,[Y.Bottle.SyncScroll],{initializer:function(){__cov_d6CtHqaByxszP9BkYGf69g.f['2']++;__cov_d6CtHqaByxszP9BkYGf69g.s['3']++;this.parseImageData();__cov_d6CtHqaByxszP9BkYGf69g.s['4']++;this.set('syncScrollMethod',this._updateColumns);__cov_d6CtHqaByxszP9BkYGf69g.s['5']++;this.publish(RENDER_FINISHED);__cov_d6CtHqaByxszP9BkYGf69g.s['6']++;this._bpgEventHandlers=this.after(COLUMN_CHANGE,this._updateColumns);},destructor:function(){__cov_d6CtHqaByxszP9BkYGf69g.f['3']++;__cov_d6CtHqaByxszP9BkYGf69g.s['7']++;this._bpgEventHandlers.detach();__cov_d6CtHqaByxszP9BkYGf69g.s['8']++;delete this._bpgEventHandlers;},renderUI:function(){__cov_d6CtHqaByxszP9BkYGf69g.f['4']++;__cov_d6CtHqaByxszP9BkYGf69g.s['9']++;this._updateColumns(true);},append:function(html){__cov_d6CtHqaByxszP9BkYGf69g.f['5']++;__cov_d6CtHqaByxszP9BkYGf69g.s['10']++;var N=Y.Node.create(html);__cov_d6CtHqaByxszP9BkYGf69g.s['11']++;this.parseImageData(N.getDOMNode().nodeType==11?(__cov_d6CtHqaByxszP9BkYGf69g.b['1'][0]++,Y.Node.create('<div>'+html+'</div>')):(__cov_d6CtHqaByxszP9BkYGf69g.b['1'][1]++,N),true);__cov_d6CtHqaByxszP9BkYGf69g.s['12']++;this.renderImages(true);},parseImageData:function(node,append){__cov_d6CtHqaByxszP9BkYGf69g.f['6']++;__cov_d6CtHqaByxszP9BkYGf69g.s['13']++;var images=append?(__cov_d6CtHqaByxszP9BkYGf69g.b['2'][0]++,this._bpgImages):(__cov_d6CtHqaByxszP9BkYGf69g.b['2'][1]++,[]),that=this,css=this.get('photoNode'),P=(__cov_d6CtHqaByxszP9BkYGf69g.b['3'][0]++,node)||(__cov_d6CtHqaByxszP9BkYGf69g.b['3'][1]++,this.get('contentBox'));__cov_d6CtHqaByxszP9BkYGf69g.s['14']++;if(!append){__cov_d6CtHqaByxszP9BkYGf69g.b['4'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['15']++;this._bpgPending=0;}else{__cov_d6CtHqaByxszP9BkYGf69g.b['4'][1]++;}__cov_d6CtHqaByxszP9BkYGf69g.s['16']++;P.all(this.get('moduleNode')).each(function(O){__cov_d6CtHqaByxszP9BkYGf69g.f['7']++;__cov_d6CtHqaByxszP9BkYGf69g.s['17']++;var image={icon:O.getData('icon'),img:O.getData('img'),width:O.getData('width'),height:O.getData('height'),module:O.addClass(CLASSES.MODULE),error:false},P=O.one(css);__cov_d6CtHqaByxszP9BkYGf69g.s['18']++;if(!image.icon){__cov_d6CtHqaByxszP9BkYGf69g.b['5'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['19']++;return;}else{__cov_d6CtHqaByxszP9BkYGf69g.b['5'][1]++;}__cov_d6CtHqaByxszP9BkYGf69g.s['20']++;image.load=Y.Node.create('<img src="'+image.icon+'" />');__cov_d6CtHqaByxszP9BkYGf69g.s['21']++;if(P){__cov_d6CtHqaByxszP9BkYGf69g.b['6'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['22']++;P.append(image.load);}else{__cov_d6CtHqaByxszP9BkYGf69g.b['6'][1]++;__cov_d6CtHqaByxszP9BkYGf69g.s['23']++;O.insert(image.load,0);}__cov_d6CtHqaByxszP9BkYGf69g.s['24']++;if((__cov_d6CtHqaByxszP9BkYGf69g.b['8'][0]++,!image.height)||(__cov_d6CtHqaByxszP9BkYGf69g.b['8'][1]++,!image.width)){__cov_d6CtHqaByxszP9BkYGf69g.b['7'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['25']++;this._bpgPending+=1;__cov_d6CtHqaByxszP9BkYGf69g.s['26']++;image.load.once('load',function(E){__cov_d6CtHqaByxszP9BkYGf69g.f['8']++;__cov_d6CtHqaByxszP9BkYGf69g.s['27']++;var O=E.target;__cov_d6CtHqaByxszP9BkYGf69g.s['28']++;if(Y.UA.ie){__cov_d6CtHqaByxszP9BkYGf69g.b['9'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['29']++;image.loadie=new Image();__cov_d6CtHqaByxszP9BkYGf69g.s['30']++;image.loadie.src=image.icon;__cov_d6CtHqaByxszP9BkYGf69g.s['31']++;this.height=this.loadie.height;__cov_d6CtHqaByxszP9BkYGf69g.s['32']++;this.width=this.loadie.width;}else{__cov_d6CtHqaByxszP9BkYGf69g.b['9'][1]++;__cov_d6CtHqaByxszP9BkYGf69g.s['33']++;this.height=O.get('height');__cov_d6CtHqaByxszP9BkYGf69g.s['34']++;this.width=O.get('width');}__cov_d6CtHqaByxszP9BkYGf69g.s['35']++;that._bpgPending-=1;},image);__cov_d6CtHqaByxszP9BkYGf69g.s['36']++;image.load.once('error',function(E){__cov_d6CtHqaByxszP9BkYGf69g.f['9']++;__cov_d6CtHqaByxszP9BkYGf69g.s['37']++;this.error=true;__cov_d6CtHqaByxszP9BkYGf69g.s['38']++;that._bpgPending-=1;},image);}else{__cov_d6CtHqaByxszP9BkYGf69g.b['7'][1]++;}__cov_d6CtHqaByxszP9BkYGf69g.s['39']++;images.push(image);},this);__cov_d6CtHqaByxszP9BkYGf69g.s['40']++;this._bpgImages=images;},_minColumn:function(){__cov_d6CtHqaByxszP9BkYGf69g.f['10']++;__cov_d6CtHqaByxszP9BkYGf69g.s['41']++;var minI=9999,minO;__cov_d6CtHqaByxszP9BkYGf69g.s['42']++;this.get('contentBox').all('> div').each(function(O){__cov_d6CtHqaByxszP9BkYGf69g.f['11']++;__cov_d6CtHqaByxszP9BkYGf69g.s['43']++;var H=O.get('offsetHeight');__cov_d6CtHqaByxszP9BkYGf69g.s['44']++;if(H<minI){__cov_d6CtHqaByxszP9BkYGf69g.b['10'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['45']++;minI=H;__cov_d6CtHqaByxszP9BkYGf69g.s['46']++;minO=O;}else{__cov_d6CtHqaByxszP9BkYGf69g.b['10'][1]++;}});__cov_d6CtHqaByxszP9BkYGf69g.s['47']++;return minO;},renderImages:function(start){__cov_d6CtHqaByxszP9BkYGf69g.f['12']++;__cov_d6CtHqaByxszP9BkYGf69g.s['48']++;var img,delay=RENDER_INTERVAL;__cov_d6CtHqaByxszP9BkYGf69g.s['49']++;if((__cov_d6CtHqaByxszP9BkYGf69g.b['12'][0]++,start)&&(__cov_d6CtHqaByxszP9BkYGf69g.b['12'][1]++,this._bpgRendering)){__cov_d6CtHqaByxszP9BkYGf69g.b['11'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['50']++;return;}else{__cov_d6CtHqaByxszP9BkYGf69g.b['11'][1]++;}__cov_d6CtHqaByxszP9BkYGf69g.s['51']++;this._bpgRendering=true;__cov_d6CtHqaByxszP9BkYGf69g.s['52']++;if(this._bpgImages.length<=this._bpgRendered){__cov_d6CtHqaByxszP9BkYGf69g.b['13'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['53']++;this._bpgRendering=false;__cov_d6CtHqaByxszP9BkYGf69g.s['54']++;this.syncScroll();__cov_d6CtHqaByxszP9BkYGf69g.s['55']++;this.fire(RENDER_FINISHED);__cov_d6CtHqaByxszP9BkYGf69g.s['56']++;return;}else{__cov_d6CtHqaByxszP9BkYGf69g.b['13'][1]++;}__cov_d6CtHqaByxszP9BkYGf69g.s['57']++;img=this._bpgImages[this._bpgRendered];__cov_d6CtHqaByxszP9BkYGf69g.s['58']++;if((__cov_d6CtHqaByxszP9BkYGf69g.b['15'][0]++,img.width)||(__cov_d6CtHqaByxszP9BkYGf69g.b['15'][1]++,img.error)){__cov_d6CtHqaByxszP9BkYGf69g.b['14'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['59']++;if(img.error){__cov_d6CtHqaByxszP9BkYGf69g.b['16'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['60']++;img.load.setAttribute('src',this.get('errorImage'));}else{__cov_d6CtHqaByxszP9BkYGf69g.b['16'][1]++;}__cov_d6CtHqaByxszP9BkYGf69g.s['61']++;this._minColumn().append(img.module);__cov_d6CtHqaByxszP9BkYGf69g.s['62']++;this._bpgRendered+=1;__cov_d6CtHqaByxszP9BkYGf69g.s['63']++;delay=1;}else{__cov_d6CtHqaByxszP9BkYGf69g.b['14'][1]++;}__cov_d6CtHqaByxszP9BkYGf69g.s['64']++;Y.later(delay,this,this.renderImages);},_updateColumns:function(refresh){__cov_d6CtHqaByxszP9BkYGf69g.f['13']++;__cov_d6CtHqaByxszP9BkYGf69g.s['65']++;var P=this.get('contentBox'),W=P.get('offsetWidth'),w=this.get('columnWidth'),N=Math.round(W/w),a=Math.floor(W/N),f=W-a*(N-1),HTML=HTMLS.COLUMN,render=(__cov_d6CtHqaByxszP9BkYGf69g.b['17'][0]++,refresh)||(__cov_d6CtHqaByxszP9BkYGf69g.b['17'][1]++,this._bpgColumns!==N),I;__cov_d6CtHqaByxszP9BkYGf69g.s['66']++;if(render){__cov_d6CtHqaByxszP9BkYGf69g.b['18'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['67']++;P.all(this.get('moduleNode')).remove();__cov_d6CtHqaByxszP9BkYGf69g.s['68']++;P.set('innerHTML','');__cov_d6CtHqaByxszP9BkYGf69g.s['69']++;this._bpgColumns=N;__cov_d6CtHqaByxszP9BkYGf69g.s['70']++;for(I=0;I<N;I++){__cov_d6CtHqaByxszP9BkYGf69g.s['71']++;P.append(HTML);}}else{__cov_d6CtHqaByxszP9BkYGf69g.b['18'][1]++;}__cov_d6CtHqaByxszP9BkYGf69g.s['72']++;P.all('> div').each(function(O,I){__cov_d6CtHqaByxszP9BkYGf69g.f['14']++;__cov_d6CtHqaByxszP9BkYGf69g.s['73']++;O.set('offsetWidth',I?(__cov_d6CtHqaByxszP9BkYGf69g.b['19'][0]++,a):(__cov_d6CtHqaByxszP9BkYGf69g.b['19'][1]++,f));});__cov_d6CtHqaByxszP9BkYGf69g.s['74']++;this.syncScroll();__cov_d6CtHqaByxszP9BkYGf69g.s['75']++;if(render){__cov_d6CtHqaByxszP9BkYGf69g.b['20'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['76']++;this._bpgRendered=0;__cov_d6CtHqaByxszP9BkYGf69g.s['77']++;this.renderImages(true);}else{__cov_d6CtHqaByxszP9BkYGf69g.b['20'][1]++;}}},{ATTRS:{errorImage:{value:'http://l.yimg.com/f/i/tw/map/i/cpx.gif',validator:Y.Lang.isString},columnWidth:{value:200,validator:function(V){__cov_d6CtHqaByxszP9BkYGf69g.f['15']++;__cov_d6CtHqaByxszP9BkYGf69g.s['78']++;return V*1>0;},setter:function(V){__cov_d6CtHqaByxszP9BkYGf69g.f['16']++;__cov_d6CtHqaByxszP9BkYGf69g.s['79']++;return V*1;}},gridType:{value:'vertical',validator:function(V){__cov_d6CtHqaByxszP9BkYGf69g.f['17']++;__cov_d6CtHqaByxszP9BkYGf69g.s['80']++;return GRID_CFGS[V]?(__cov_d6CtHqaByxszP9BkYGf69g.b['21'][0]++,true):(__cov_d6CtHqaByxszP9BkYGf69g.b['21'][1]++,false);}},moduleNode:{value:'> div',validator:Y.Lang.isString},photoNode:{value:'.img',validator:Y.Lang.isString}},HTML_PARSER:{errorImage:function(srcNode){__cov_d6CtHqaByxszP9BkYGf69g.f['18']++;__cov_d6CtHqaByxszP9BkYGf69g.s['81']++;return srcNode.getData('error-image');},columnWidth:function(srcNode){__cov_d6CtHqaByxszP9BkYGf69g.f['19']++;__cov_d6CtHqaByxszP9BkYGf69g.s['82']++;return srcNode.getData('column-width');},gridType:function(srcNode){__cov_d6CtHqaByxszP9BkYGf69g.f['20']++;__cov_d6CtHqaByxszP9BkYGf69g.s['83']++;return srcNode.getData('grid-type');},moduleNode:function(srcNode){__cov_d6CtHqaByxszP9BkYGf69g.f['21']++;__cov_d6CtHqaByxszP9BkYGf69g.s['84']++;return srcNode.getData('module-node');},photoNode:function(srcNode){__cov_d6CtHqaByxszP9BkYGf69g.f['22']++;__cov_d6CtHqaByxszP9BkYGf69g.s['85']++;return srcNode.getData('photo-node');}}});__cov_d6CtHqaByxszP9BkYGf69g.s['86']++;Y.namespace('Bottle').PhotoGrid=PhotoGrid;},'gallery-2012.12.05-21-01',{'requires':['gallery-bt-syncscroll']});
