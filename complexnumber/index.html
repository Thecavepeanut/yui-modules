<!DOCTYPE HTML>
<html>

<head>
	<title>Complex Number Unit Tests</title>
	<meta http-equiv=content-type content="text/html; charset=utf-8">

	<script src="http://yui.yahooapis.com/3.3.0/build/yui/yui-min.js"></script>
	<script src="gallery-math-debug.js"></script>
	<script src="gallery-complexnumber-debug.js"></script>
</head>

<body class="yui3-skin-sam">

<script type="text/javascript">
YUI({
//	filter: 'debug',
	logInclude: { TestRunner: true }
}).use('gallery-complexnumber', 'test', 'console', 'console-filters', 'dd-plugin', function(Y)
{
	var logToLog10 = 1/Math.log(10);

	Y.Assert.areWithinEpsilon = function(v1,v2,e)
	{
		if (Y.Lang.isUndefined(e))
		{
			e = 1e-9;
		}

		if (v1 !== 0)
		{
			var scale = Math.pow(10, Math.floor(Math.log(Math.abs(v1))*logToLog10));
			v1       /= scale;
			v2       /= scale;
		}

		Y.Assert.isTrue(Math.abs(v1-v2) <= e, 'Values should be within '+e+'\nExpected: '+v1+' (number)\nActual:'+v2+ ' (number)\n-----');
	};

	Y.Assert.complexWithinEpsilon = function(v1,v2,e)
	{
		Y.Assert.areWithinEpsilon(v1.r, v2.r, e);
		Y.Assert.areWithinEpsilon(v1.i, v2.i, e);
	};

	Y.Test.Runner.add(new Y.Test.Case(
	{
		name: 'Complex number',

		testPolar: function()
		{
			var v = new Y.ComplexNumber(1,2);
			Y.Assert.complexWithinEpsilon(v, Y.ComplexNumber.fromPolar(v.magnitude(), v.phase()));
		},

		testAdd: function()
		{
			var v = new Y.ComplexNumber(1,2);
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(2,1), v.add(new Y.ComplexNumber(1,-1)));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(1,1), v.add(-1));
		},

		testSubtract: function()
		{
			var v = new Y.ComplexNumber(1,2);
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(2,1), v.subtract(new Y.ComplexNumber(-1,1)));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(1,1), v.subtract(1));
		},

		testMultiply: function()
		{
			var v = new Y.ComplexNumber(1,1);
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(0,2), v.multiply(new Y.ComplexNumber(1,1)));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(0,4), v.multiply(2));
		},

		testDivide: function()
		{
			var v = new Y.ComplexNumber(-1,1);
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(0,1), v.divide(new Y.ComplexNumber(1,1)));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(0,0.5), v.divide(2));
		},

		testString: function()
		{
			Y.Assert.areEqual('1', new Y.ComplexNumber(1).toString());
			Y.Assert.areEqual('-1', new Y.ComplexNumber(-1).toString());
			Y.Assert.areEqual('i', new Y.ComplexNumber(0,1).toString());
			Y.Assert.areEqual('-i', new Y.ComplexNumber(0,-1).toString());
			Y.Assert.areEqual('2i', new Y.ComplexNumber(0,2).toString());
			Y.Assert.areEqual('-2i', new Y.ComplexNumber(0,-2).toString());
			Y.Assert.areEqual('-1+i', new Y.ComplexNumber(-1,1).toString());
			Y.Assert.areEqual('1-i', new Y.ComplexNumber(1,-1).toString());
			Y.Assert.areEqual('2+3i', new Y.ComplexNumber(2,3).toString());
			Y.Assert.areEqual('-2-3i', new Y.ComplexNumber(-2,-3).toString());
		}
	}));

	Y.Test.Runner.add(new Y.Test.Case(
	{
		name: 'Complex math',

		testAdd: function()
		{
			var v1 = new Y.ComplexNumber(1,1);
			var v2 = new Y.ComplexNumber(-1,1);
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(2), Y.ComplexMath.add(1, 1));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(2,2), Y.ComplexMath.add(v1, v1));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(0,2), Y.ComplexMath.add(v1, v2));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(2,3), Y.ComplexMath.add(v1, v2, v1, 1));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(2,3), Y.ComplexMath.add([v1, v2, v1, 1]));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(2,3), Y.ComplexMath.add([v1, v2], v1, 1));
		},

		testSubtract: function()
		{
			var v1 = new Y.ComplexNumber(2,1);
			var v2 = new Y.ComplexNumber(-1,2);
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(-1), Y.ComplexMath.subtract(1, 2));
			Y.Assert.complexWithinEpsilon(Y.ComplexMath.ZERO, Y.ComplexMath.subtract(v1, v1));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(3,-1), Y.ComplexMath.subtract(v1, v2));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(1,1), Y.ComplexMath.subtract(v1, 1));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(-1,-1), Y.ComplexMath.subtract(1, v1));
		},

		testMultiply: function()
		{
			var v1 = new Y.ComplexNumber(1,1);
			var v2 = new Y.ComplexNumber(-1,1);
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(6), Y.ComplexMath.multiply(2, 3));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(0,2), Y.ComplexMath.multiply(v1, v1));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(-2), Y.ComplexMath.multiply(v1, v2));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(-8), Y.ComplexMath.multiply(v1, v1, v1, v1, 2));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(-8), Y.ComplexMath.multiply([v1, v1, v1, v1, 2]));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(-8), Y.ComplexMath.multiply(v1, [v1, v1], v1, 2));
		},

		testDivide: function()
		{
			var v1 = new Y.ComplexNumber(1,1);
			var v2 = new Y.ComplexNumber(-1,1);
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(2), Y.ComplexMath.divide(4, 2));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(1), Y.ComplexMath.divide(v1, v1));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(0,1), Y.ComplexMath.divide(v2, v1));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(0.5,0.5), Y.ComplexMath.divide(v1, 2));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(1,-1), Y.ComplexMath.divide(2, v1));
		},

		testAbs: function()
		{
			Y.Assert.areWithinEpsilon(5, 5);
			Y.Assert.areWithinEpsilon(5, Y.ComplexMath.abs(new Y.ComplexNumber(3,4)));
			Y.Assert.areWithinEpsilon(5, Y.ComplexMath.abs(new Y.ComplexNumber(3,-4)));
		},

		testSqrt: function()
		{
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(2), Y.ComplexMath.sqrt(4));
			Y.Assert.complexWithinEpsilon(Y.ComplexMath.I, Y.ComplexMath.sqrt(-1));
		},

		testExp: function()
		{
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(1), Y.ComplexMath.exp(0));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(Math.exp(2)), Y.ComplexMath.exp(2));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(0, 1), Y.ComplexMath.exp(new Y.ComplexNumber(0, Math.PI/2)));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(0, Math.E), Y.ComplexMath.exp(new Y.ComplexNumber(1, Math.PI/2)));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(1/Math.SQRT2, 1/Math.SQRT2), Y.ComplexMath.exp(new Y.ComplexNumber(0, Math.PI/4)));
		},

		testLog: function()
		{
			Y.Assert.complexWithinEpsilon(Y.ComplexMath.ZERO, Y.ComplexMath.log(Y.ComplexMath.exp(0)));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(2), Y.ComplexMath.log(Y.ComplexMath.exp(2)));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(0, Math.PI/2), Y.ComplexMath.log(Y.ComplexMath.exp(new Y.ComplexNumber(0, Math.PI/2))));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(1, Math.PI/2), Y.ComplexMath.log(Y.ComplexMath.exp(new Y.ComplexNumber(1, Math.PI/2))));
			Y.Assert.complexWithinEpsilon(new Y.ComplexNumber(0, Math.PI/4), Y.ComplexMath.log(Y.ComplexMath.exp(new Y.ComplexNumber(0, Math.PI/4))));
		},

		testParallel: function()
		{
		},

		testPow: function()
		{
		},

		testTrigonometric: function()
		{
			var v = new Y.ComplexNumber(1,2);
//			Y.Assert.complexWithinEpsilon(v, Y.ComplexMath.acos(Y.ComplexMath.cos(v)));
//			Y.Assert.complexWithinEpsilon(v, Y.ComplexMath.asinh(Y.ComplexMath.sinh(v)));
//			Y.Assert.complexWithinEpsilon(v, Y.ComplexMath.atanh(Y.ComplexMath.tanh(v)));
		},

		testHyperbolic: function()
		{
			var v = new Y.ComplexNumber(1,2);
//			Y.Assert.complexWithinEpsilon(v, Y.ComplexMath.acosh(Y.ComplexMath.cosh(v)));
//			Y.Assert.complexWithinEpsilon(v, Y.ComplexMath.asinh(Y.ComplexMath.sinh(v)));
//			Y.Assert.complexWithinEpsilon(v, Y.ComplexMath.atanh(Y.ComplexMath.tanh(v)));
		}
	}));

	new Y.Console(
	{
		newestOnTop: false,
		plugins: [ {fn: Y.Plugin.Drag, cfg: {handles: ['.yui3-console-hd']}}, Y.Plugin.ConsoleFilters ]
	})
	.render();

	Y.Test.Runner.run();
});
</script>

<h1><a href="http://yuilibrary.com/gallery/show/complexnumber">YUI 3 Complex Number</a> Unit Tests</h1>

<p><a href="yuidoc">Show me the documentation</a></p>
<p><a href="/yui3-gallery/">Back to project list</a></p>

</body>
</html>
