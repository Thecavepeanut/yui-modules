YUI.add("gallery-mathcanvas",function(E){function L(){this.list=[];}L.width=function(Y){return Y.right-Y.left;};L.height=function(Y){return Y.bottom-Y.top;};L.xcenter=function(Y){return Math.floor((Y.left+Y.right)/2);};L.ycenter=function(Y){return Math.floor((Y.top+Y.bottom)/2);};L.area=function(Y){return L.width(Y)*L.height(Y);};L.containsPt=function(Y,t){return(Y.left<=t[0]&&t[0]<Y.right&&Y.top<=t[1]&&t[1]<Y.bottom);};L.containsRect=function(t,Y){return(t.left<=Y.left&&Y.left<=Y.right&&Y.right<=t.right&&t.top<=Y.top&&Y.top<=Y.bottom&&Y.bottom<=t.bottom);};L.cover=function(t,Y){var u={top:Math.min(t.top,Y.top),left:Math.min(t.left,Y.left),bottom:Math.max(t.bottom,Y.bottom),right:Math.max(t.right,Y.right)};return u;};L.prototype={add:function(v,t,Y,u){this.list.push({rect:v,midline:t,font_size:Y,func:u});return this.list.length-1;},get:function(Y){return this.list[Y];},find:function(Y){return E.Array.find(this.list,function(t){return(t.func===Y);});},findIndex:function(Y){return E.Array.indexOf(this.list,this.find(Y));},shift:function(u,t,Y){if(t===0&&Y===0){return;}var v=this.list[u];var w=E.clone(v.rect,true);v.rect.top+=Y;v.rect.left+=t;v.rect.bottom+=Y;v.rect.right+=t;v.midline+=Y;E.Array.each(this.list,function(x){if(w.left<=x.rect.left&&x.rect.right<=w.right&&w.top<=x.rect.top&&x.rect.bottom<=w.bottom){x.rect.top+=Y;x.rect.left+=t;x.rect.bottom+=Y;x.rect.right+=t;x.midline+=Y;}});},setMidline:function(Y,t){this.shift(Y,0,t-this.list[Y].midline);},getBounds:function(){return this.list[this.list.length-1].rect;},getSelection:function(w,t){var u=this.getBounds();if(!L.containsPt(u,w)){return -1;}var v=0;var Y=this.list.length-1;E.Array.each(this.list,function(z,x){var y=L.area(z.rect);if(L.containsPt(z.rect,w)&&L.containsPt(z.rect,t)&&(v===0||y<v)){Y=x;v=y;}});return Y;},getParent:function(Y){var v=this.list[Y].rect;for(var t=Y+1;t<this.list.length;t++){var u=this.list[t].rect;if(L.containsRect(u,v)){return t;}}return this.list.length-1;}};function j(){this.parent=null;}j.prototype={getParent:function(){return this.parent;},prepareToRender:function(v,u,t,Y){var w=this.toString();var x={top:u.y,left:u.x,bottom:u.y+v.getLineHeight(t),right:u.x+v.getStringWidth(t,w)};return Y.add(x,L.ycenter(x),t,this);},render:function(t,Y){var u=Y.find(this);t.drawString(u.rect.left,u.midline,u.font_size,this.toString());},parenthesizeForPrint:function(Y){return(this instanceof C);},parenthesizeForRender:function(Y){return(this instanceof C);}};j.updateSum=function(Y,t){if(Y instanceof K){Y.appendArg(t);return Y;}else{return new K(Y,t);}};j.updateProduct=function(Y,t){if(Y instanceof s){Y.appendArg(t);return Y;}else{return new s(Y,t);}};E.MathFunction=j;function o(t){o.superclass.constructor.call(this);var Y=E.Lang.isString(t);if(Y&&(t.indexOf(".")>=0||(!/x/i.test(t)&&/e/i.test(t)))){this.value=parseFloat(t);}else{if(Y){this.value=parseInt(t);}else{this.value=t;}}}E.extend(o,j,{evaluate:function(){return this.value;},toString:function(){return this.value;}});j.Value=o;function S(Y){S.superclass.constructor.call(this);this.name=Y;}E.extend(S,j,{evaluate:function(t){var Y=t[this.name];if(E.Lang.isUndefined(Y)){throw new Error("undefined variable: "+this.name);}return(Y instanceof j?Y.evaluate(t):Y);},toString:function(){return this.name;}});j.Variable=S;function X(){X.superclass.constructor.call(this);}E.extend(X,j,{evaluate:function(){return Math.PI;},toString:function(){return"\u03c0";}});j.Pi=X;function e(){e.superclass.constructor.call(this);}E.extend(e,j,{evaluate:function(){return Math.E;},toString:function(){return"e";}});j.E=e;function a(){a.superclass.constructor.call(this);}E.extend(a,j,{evaluate:function(){return E.ComplexMath.I;},toString:function(){return"i";}});j.I=a;function C(t,Y){C.superclass.constructor.call(this);this.name=t;if(E.Lang.isArray(Y)&&E.Lang.isArray(Y[0])){Y=Y[0];}this.args=[];if(E.Lang.isArray(Y)){for(var u=0;u<Y.length;u++){this.appendArg(Y[u]);}}else{for(var u=1;u<arguments.length;u++){this.appendArg(arguments[u]);}}}E.extend(C,j,{getArgCount:function(){return this.args.length;},getArg:function(Y){return this.args[Y];},appendArg:function(Y){Y.parent=this;this.args.push(Y);},removeArg:function(t){var Y=E.Array.indexOf(this.args,t);if(Y>=0){t.parent=null;this.args.splice(Y,1);}},replaceArg:function(Y,u){var t=E.Array.indexOf(this.args,Y);if(t>=0){Y.parent=null;u.parent=this;this.args[t]=u;}},evaluateArgs:function(Y){return E.Array.map(this.args,function(t){return t.evaluate(Y);});},prepareToRender:function(t,AE,x,AF){var Y={top:AE.y,left:AE.x,bottom:AE.y+t.getLineHeight(x),right:AE.x+t.getStringWidth(x,this.name)};var AC=L.ycenter(Y);var AD=AC;var u={x:Y.right,y:Y.top};var AA=t.getStringWidth(x,", ");var AH=this.args.length;var AB=[];for(var z=0;z<AH;z++){var y=this.args[z].prepareToRender(t,u,x,AF);var w=AF.get(y);var v=w.rect;u.x=v.right+AA;Y=L.cover(Y,v);AC=Math.max(AC,w.midline);AB.push(y);}if(AH>1&&AC>AD){for(var z=0;z<AH;z++){var y=AB[z];AF.setMidline(y,AC);Y=L.cover(Y,AF.get(y).rect);}}var AG=t.getParenthesisWidth(Y);for(var z=0;z<AH;z++){AF.shift(AB[z],AG,0);}Y.right+=2*AG;return AF.add(Y,AC,x,this);},render:function(v,Y){var x=Y.find(this);v.drawString(x.rect.left,x.midline,x.font_size,this.name);var w={top:x.rect.top,bottom:x.rect.bottom};for(var u=0;u<this.args.length;u++){this.args[u].render(v,Y);var x=Y.find(this.args[u]);var t=x.rect;if(u===0){w.left=t.left;}if(u<this.args.length-1){v.drawString(t.right,x.midline,x.font_size,",");}else{w.right=t.right;v.drawParentheses(w);}}},toString:function(){return this.name+"("+this.args.join(",")+")";},_printArg:function(t){var Y=t instanceof j?t:this.args[t];if(Y.parenthesizeForPrint(this)){return"("+Y+")";}else{return Y.toString();}}});j.FunctionWithArgs=C;function Q(Y){Q.superclass.constructor.call(this,"-",Y);}E.extend(Q,C,{evaluate:function(Y){return E.ComplexMath.subtract(0,this.args[0].evaluate(Y));},prepareToRender:function(u,y,w,z){var v=E.clone(y,true);v.x+=u.getStringWidth(w,"-");var AA=this.args[0];if(AA instanceof h){v.x+=u.getStringWidth(w," ");
}var t={top:y.y,left:y.x,bottom:y.y+u.getLineHeight(w),right:v.x};var AB=AA.prepareToRender(u,v,w,z);var Y=z.get(AB);if(AA.parenthesizeForRender(this)){var x=u.getParenthesisWidth(Y.rect);z.shift(AB,x,0);t.right=Y.rect.right+x;}t=L.cover(t,Y.rect);return z.add(t,Y.midline,w,this);},render:function(v,t){var w=t.find(this);v.drawString(w.rect.left,w.midline,w.font_size,"-");var Y=this.args[0];Y.render(v,t);if(Y.parenthesizeForRender(this)){var u=t.find(Y);v.drawParentheses(u.rect);}},toString:function(){return"-"+this._printArg(0);}});j.Negate=Q;function K(){P.superclass.constructor.call(this,"+",new E.Array(arguments));}E.extend(K,C,{evaluate:function(Y){return E.ComplexMath.add(this.evaluateArgs(Y));},prepareToRender:function(t,AA,w,AB){var u=E.clone(AA,true);var Y={top:AA.y,left:AA.x,bottom:AA.y+t.getLineHeight(w),right:AA.x};var y=L.ycenter(Y);var z=y;var v=t.getStringWidth(w," ");var x=t.getStringWidth(w,"+");var AC=t.getStringWidth(w,"-");E.Array.each(this.args,function(AD,AF){var AH=this;if(AD instanceof Q){if(AF>0){u.x+=v;}u.x+=AC+v;AH=AD;AD=AD.args[0];}else{if(AF>0){u.x+=x+2*v;}}var AE=AD.prepareToRender(t,u,w,AB);var AG=AB.get(AE);u.x=AG.rect.right;if(AD.parenthesizeForRender(AH)){var AI=t.getParenthesisWidth(AG.rect);AB.shift(AE,AI,0);u.x+=2*AI;Y.right=AG.rect.right+AI;}Y=L.cover(Y,AG.rect);y=Math.max(y,AG.midline);},this);if(this.args.length>1&&y>z){E.Array.each(this.args,function(AD){if(AD instanceof Q){AD=AD.args[0];}var AE=AB.findIndex(AD);AB.setMidline(AE,y);Y=L.cover(Y,AB.get(AE).rect);});}return AB.add(Y,y,w,this);},render:function(u,t){var w=t.find(this);var Y=w.rect.left;var v=u.getStringWidth(w.font_size," ");E.Array.each(this.args,function(x,y){var AA=this;if(x instanceof Q){u.drawString(Y,w.midline,w.font_size,"-");AA=x;x=x.args[0];}else{if(y>0){u.drawString(Y,w.midline,w.font_size,"+");}}x.render(u,t);var z=t.find(x);Y=z.rect.right;if(x.parenthesizeForRender(AA)){u.drawParentheses(z.rect);Y+=u.getParenthesisWidth(z.rect);}Y+=v;},this);},toString:function(){return E.Array.reduce(this.args,"",function(u,Y,t){if(Y instanceof Q){u+="-";Y=Y.args[0];}else{if(t>0){u+="+";}}return u+this._printArg(Y);},this);}});j.Sum=K;function s(){P.superclass.constructor.call(this,"*",new E.Array(arguments));}E.extend(s,C,{evaluate:function(Y){return E.ComplexMath.multiply(this.evaluateArgs(Y));},prepareToRender:function(t,z,v,AA){var u=E.clone(z,true);var Y={top:z.y,left:z.x,bottom:z.y+t.getLineHeight(v),right:z.x};var w=L.ycenter(Y);var y=w;var x=t.getStringWidth(v,"\u00b7");E.Array.each(this.args,function(AB,AD){var AC=AB.prepareToRender(t,u,v,AA);var AE=AA.get(AC);u.x=AE.rect.right+x;if(AB.parenthesizeForRender(this)){var AF=t.getParenthesisWidth(AE.rect);AA.shift(AC,AF,0);u.x+=2*AF;Y.right=AE.rect.right+AF;}Y=L.cover(Y,AE.rect);w=Math.max(w,AE.midline);},this);if(this.args.length>1&&w>y){E.Array.each(this.args,function(AB){var AC=AA.findIndex(AB);AA.setMidline(AC,w);Y=L.cover(Y,AA.get(AC).rect);});}return AA.add(Y,w,v,this);},render:function(v,t){var w=t.find(this);var Y=w.rect.left;var u=v.getStringWidth(w.font_size,"\u00b7");E.Array.each(this.args,function(x,y){if(y>0){v.drawString(Y,w.midline,w.font_size,"\u00b7");}x.render(v,t);var z=t.find(x);Y=z.rect.right;if(x.parenthesizeForRender(this)){v.drawParentheses(z.rect);Y+=v.getParenthesisWidth(z.rect);}},this);},toString:function(){return E.Array.reduce(this.args,"",function(u,Y,t){if(t>0){u+="*";}return u+this._printArg(t);},this);}});j.Product=s;function h(t,Y){h.superclass.constructor.call(this,"/",t,Y);}E.extend(h,C,{evaluate:function(Y){return E.ComplexMath.divide(this.args[0].evaluate(Y),this.args[1].evaluate(Y));},prepareToRender:function(t,AC,y,AD){var Y={top:AC.y,left:AC.x,bottom:AC.y,right:AC.x};var w=t.getStringWidth(y," ");var v=E.clone(AC,true);v.x+=w;var AB=this.args[0].prepareToRender(t,v,y,AD);var z=AD.get(AB);v.y=z.rect.bottom;Y=L.cover(Y,z.rect);var u=t.getHorizontalBarHeight();var AA=v.y+u/2;v.y+=u;var AE=this.args[1].prepareToRender(t,v,y,AD);var x=AD.get(AE);Y=L.cover(Y,x.rect);var AF=(z.rect.right-x.rect.right)/2;if(AF>0){AD.shift(AE,AF,0);}else{if(AF<0){AD.shift(AB,-AF,0);}}Y.right+=w;return AD.add(Y,AA,y,this);},render:function(t,Y){var v=Y.find(this);var u=t.getHorizontalBarHeight();var w={top:v.midline-u/2,left:v.rect.left,bottom:v.midline+u/2,right:v.rect.right};this.args[0].render(t,Y);t.drawHorizontalBar(w);this.args[1].render(t,Y);},toString:function(){return this._printArg(0)+"/"+this._printArg(1);}});j.Quotient=h;function W(Y){W.superclass.constructor.call(this,"abs",Y);}E.extend(W,C,{evaluate:function(Y){return E.ComplexMath.abs(this.args[0].evaluate(Y));},prepareToRender:function(v,x,w,y){var t=v.getVerticalBarWidth();var z=this.args[0];var AA=z.prepareToRender(v,x,w,y);var u=y.get(AA);y.shift(AA,t,0);var Y={top:x.y,left:x.x,bottom:u.rect.bottom,right:u.rect.right+t};return y.add(Y,u.midline,w,this);},render:function(t,Y){var v=Y.find(this);t.drawVerticalBar(v.rect);this.args[0].render(t,Y);var u=E.clone(v.rect,true);u.left=u.right-t.getVerticalBarWidth();t.drawVerticalBar(u);}});j.Magnitude=W;function O(Y){O.superclass.constructor.call(this,"phase",Y);}E.extend(O,C,{evaluate:function(Y){return E.ComplexMath.phase(this.args[0].evaluate(Y));}});j.Phase=O;function l(Y){l.superclass.constructor.call(this,"conjugate",Y);}E.extend(l,C,{evaluate:function(Y){return E.ComplexMath.conjugate(this.args[0].evaluate(Y));},prepareToRender:function(u,y,x,z){var v=u.getHorizontalBarHeight();var w=E.clone(y,true);w.y+=v;var AA=this.args[0].prepareToRender(u,w,x,z);var t=z.get(AA);var Y=E.clone(t.rect,true);Y.top-=v;return z.add(Y,t.midline,x,this);},render:function(t,Y){var u=Y.find(this);t.drawHorizontalBar(u.rect);this.args[0].render(t,Y);}});j.Conjugate=l;function D(Y){D.superclass.constructor.call(this,"rotate",Y);}E.extend(D,C,{evaluate:function(Y){return E.ComplexMath.rotate(this.args[0].evaluate(Y),this.args[1].evaluate(Y));}});j.Rotate=D;function Z(Y){Z.superclass.constructor.call(this,"re",Y);}E.extend(Z,C,{evaluate:function(Y){var t=this.args[0].evaluate(Y);
return E.ComplexMath.isComplexNumber(t)?t.real():t;}});j.RealPart=Z;function m(Y){m.superclass.constructor.call(this,"im",Y);}E.extend(m,C,{evaluate:function(Y){var t=this.args[0].evaluate(Y);return E.ComplexMath.isComplexNumber(t)?t.imag():0;}});j.ImaginaryPart=m;function n(){n.superclass.constructor.call(this,"min",new E.Array(arguments));}E.extend(n,C,{evaluate:function(Y){return Math.min.apply(null,this.evaluateArgs(Y));}});j.Min=n;function P(){P.superclass.constructor.call(this,"max",new E.Array(arguments));}E.extend(P,C,{evaluate:function(Y){return Math.max.apply(null,this.evaluateArgs(Y));}});j.Max=P;function R(Y){R.superclass.constructor.call(this,"sqrt",Y);}E.extend(R,C,{evaluate:function(Y){return E.ComplexMath.sqrt(this.args[0].evaluate(Y));},prepareToRender:function(u,AA,x,AB){var AC=this.args[0].prepareToRender(u,AA,x,AB);var t=AB.get(AC);var z=L.height(t.rect);var w=1+Math.round(2*z/(4*Math.sqrt(3)));var y=3;var v=4;AB.shift(AC,w,v);var Y={top:AA.y,left:AA.x,bottom:t.rect.bottom,right:t.rect.right+y};return AB.add(Y,t.midline,x,this);},render:function(t,Y){var u=Y.find(this);this._drawSquareRoot(t,u.rect);this.args[0].render(t,Y);},_drawSquareRoot:function(u,z){var v=L.height(z);var Y=z.left;var AA=z.top+Math.round(3*v/4);var t=Math.round((v-3)/(4*Math.sqrt(3)));u.beginPath();u.moveTo(Y,AA);Y+=t;AA=z.bottom-1;u.lineTo(Y,AA);Y+=t;AA=z.top+2;u.lineTo(Y,AA);Y=z.right-1;u.lineTo(Y,AA);u.line(0,Math.round(v/8));u.stroke();}});j.SquareRoot=R;function b(Y,t){b.superclass.constructor.call(this,"^",Y,t);}E.extend(b,C,{evaluate:function(Y){return E.ComplexMath.pow(this.args[0].evaluate(Y),this.args[1].evaluate(Y));},prepareToRender:function(t,AC,w,AD){var v=t.getStringWidth(w," ");var u=E.clone(AC,true);u.x+=v;var y=this.args[0].prepareToRender(t,u,w,AD);var x=AD.get(y);u.x=x.rect.right;if(this.args[0].parenthesizeForRender(this)){var AB=t.getParenthesisWidth(x.rect);AD.shift(y,AB,0);u.x+=2*AB;}var AE=t.getSuperSubFontSize(w);var z=this.args[1].prepareToRender(t,u,AE,AD);var AA=AD.get(z);var Y={top:AC.y,left:AC.x,bottom:AC.y+L.height(AA.rect)+t.getSuperscriptHeight(x.rect),right:AA.rect.right};if(Y.bottom>x.rect.bottom){AD.shift(y,0,Y.bottom-x.rect.bottom);}else{Y.bottom=x.rect.bottom;}return AD.add(Y,x.midline,w,this);},render:function(t,Y){if(this.args[0].parenthesizeForRender(this)){var u=Y.find(this.args[0]);t.drawParentheses(u.rect);}this.args[0].render(t,Y);this.args[1].render(t,Y);},toString:function(){return this._printArg(0)+"^"+this._printArg(1);}});j.Exponential=b;function J(Y,t){J.superclass.constructor.call(this,"log",Y,t);}E.extend(J,C,{evaluate:function(Y){return E.ComplexMath.divide(E.ComplexMath.log(this.args[1].evaluate(Y)),E.ComplexMath.log(this.args[0].evaluate(Y)));},prepareToRender:function(t,AC,w,AD){var Y={top:AC.y,left:AC.x,bottom:AC.y+t.getLineHeight(w),right:AC.x+t.getStringWidth(w,"log")};var u={x:Y.right,y:Y.top};var z=t.getSuperSubFontSize(w);var AA=this.args[0].prepareToRender(t,u,z,AD);var x=AD.get(AA);u.x=x.rect.right;var v=this.args[1].prepareToRender(t,u,w,AD);var y=AD.get(v);Y=L.cover(Y,y.rect);var AB=t.getParenthesisWidth(y.rect);AD.shift(v,AB,0);Y.right+=2*AB;AD.shift(AA,0,y.midline-Y.top);Y=L.cover(Y,x.rect);return AD.add(Y,y.midline,w,this);},render:function(u,t){var v=t.find(this);u.drawString(v.rect.left,v.midline,v.font_size,"log");this.args[0].render(u,t);this.args[1].render(u,t);var Y=t.find(this.args[1]);u.drawParentheses(Y.rect);}});j.Logarithm=J;function U(Y){U.superclass.constructor.call(this,"ln",Y);}E.extend(U,C,{evaluate:function(Y){return E.ComplexMath.log(this.args[0].evaluate(Y));}});j.NaturalLog=U;function d(Y){d.superclass.constructor.call(this,"sin",Y);}E.extend(d,C,{evaluate:function(Y){return E.ComplexMath.sin(this.args[0].evaluate(Y));}});j.Sine=d;function q(Y){q.superclass.constructor.call(this,"cos",Y);}E.extend(q,C,{evaluate:function(Y){return E.ComplexMath.cos(this.args[0].evaluate(Y));}});j.Cosine=q;function r(Y){r.superclass.constructor.call(this,"tan",Y);}E.extend(r,C,{evaluate:function(Y){return E.ComplexMath.tan(this.args[0].evaluate(Y));}});j.Tangent=r;function N(Y){N.superclass.constructor.call(this,"arcsin",Y);}E.extend(N,C,{evaluate:function(Y){return Math.asin(this.args[0].evaluate(Y));}});j.Arcsine=N;function F(Y){F.superclass.constructor.call(this,"arccos",Y);}E.extend(F,C,{evaluate:function(Y){return Math.acos(this.args[0].evaluate(Y));}});j.Arccosine=F;function c(Y){c.superclass.constructor.call(this,"arctan",Y);}E.extend(c,C,{evaluate:function(Y){return Math.atan(this.args[0].evaluate(Y));}});j.Arctangent=c;function f(t,Y){f.superclass.constructor.call(this,"arctan2",t,Y);}E.extend(f,C,{evaluate:function(Y){return Math.atan2(this.args[0].evaluate(Y),this.args[1].evaluate(Y));}});j.Arctangent2=f;function p(Y){p.superclass.constructor.call(this,"cosh",Y);}E.extend(p,C,{evaluate:function(Y){return E.ComplexMath.cosh(this.args[0].evaluate(Y));}});j.HyperbolicCosine=p;function T(Y){T.superclass.constructor.call(this,"sinh",Y);}E.extend(T,C,{evaluate:function(Y){return E.ComplexMath.sinh(this.args[0].evaluate(Y));}});j.HyperbolicSine=T;function A(Y){A.superclass.constructor.call(this,"tanh",Y);}E.extend(A,C,{evaluate:function(Y){return E.ComplexMath.tanh(this.args[0].evaluate(Y));}});j.HyperbolicTangent=A;function G(Y){G.superclass.constructor.call(this,"arccosh",Y);}E.extend(G,C,{evaluate:function(Y){return E.ComplexMath.acosh(this.args[0].evaluate(Y));}});j.InverseHyperbolicCosine=G;function I(Y){I.superclass.constructor.call(this,"arcsinh",Y);}E.extend(I,C,{evaluate:function(Y){return E.ComplexMath.asinh(this.args[0].evaluate(Y));}});j.InverseHyperbolicSine=I;function k(Y){k.superclass.constructor.call(this,"arctanh",Y);}E.extend(k,C,{evaluate:function(Y){return E.ComplexMath.atanh(this.args[0].evaluate(Y));}});j.InverseHyperbolicTangent=k;var i=(function(){var x={trace:function u(){},yy:{},symbols_:{"error":2,"expression":3,"e":4,"EOF":5,"NUMBER":6,"E":7,"PI":8,"I":9,"VARIABLE":10,"(":11,")":12,"+":13,"-":14,"*":15,"/":16,"^":17,"ABS":18,"PHASE":19,"CONJUGATE":20,"ROTATE":21,"arglist":22,"RE":23,"IM":24,"MIN":25,"MAX":26,"SQRT":27,"LOG":28,"LOG2":29,"LOG10":30,"LN":31,"ARCSIN":32,"ARCCOS":33,"ARCTAN":34,"ARCTAN2":35,"SIN":36,"COS":37,"TAN":38,"SINH":39,"COSH":40,"TANH":41,"ARCSINH":42,"ARCCOSH":43,"ARCTANH":44,",":45,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",6:"NUMBER",7:"E",8:"PI",9:"I",10:"VARIABLE",11:"(",12:")",13:"+",14:"-",15:"*",16:"/",17:"^",18:"ABS",19:"PHASE",20:"CONJUGATE",21:"ROTATE",23:"RE",24:"IM",25:"MIN",26:"MAX",27:"SQRT",28:"LOG",29:"LOG2",30:"LOG10",31:"LN",32:"ARCSIN",33:"ARCCOS",34:"ARCTAN",35:"ARCTAN2",36:"SIN",37:"COS",38:"TAN",39:"SINH",40:"COSH",41:"TANH",42:"ARCSINH",43:"ARCCOSH",44:"ARCTANH",45:","},productions_:[0,[3,2],[4,1],[4,1],[4,1],[4,1],[4,1],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,2],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[22,1],[22,3]],performAction:function t(y,AB,AC,AF,AE,AA,AD){var z=AA.length-1;
switch(AE){case 1:return AA[z-1];break;case 2:this.$=new AF.MathFunction.Value(y);break;case 3:this.$=new AF.MathFunction.E();break;case 4:this.$=new AF.MathFunction.Pi();break;case 5:this.$=new AF.MathFunction.I();break;case 6:this.$=new AF.MathFunction.Variable(y);break;case 7:this.$=AA[z-1];break;case 8:this.$=AF.MathFunction.updateSum(AA[z-2],AA[z]);break;case 9:this.$=AF.MathFunction.updateSum(AA[z-2],new AF.MathFunction.Negate(AA[z]));break;case 10:this.$=AF.MathFunction.updateProduct(AA[z-2],AA[z]);break;case 11:this.$=new AF.MathFunction.Quotient(AA[z-2],AA[z]);break;case 12:this.$=new AF.MathFunction.Exponential(AA[z-2],AA[z]);break;case 13:this.$=new AF.MathFunction.Negate(AA[z]);break;case 14:this.$=new AF.MathFunction.Magnitude(AA[z-1]);break;case 15:this.$=new AF.MathFunction.Phase(AA[z-1]);break;case 16:this.$=new AF.MathFunction.Conjugate(AA[z-1]);break;case 17:this.$=new AF.MathFunction.Rotate(AA[z-1]);break;case 18:this.$=new AF.MathFunction.RealPart(AA[z-1]);break;case 19:this.$=new AF.MathFunction.ImaginaryPart(AA[z-1]);break;case 20:this.$=new AF.MathFunction.Min(AA[z-1]);break;case 21:this.$=new AF.MathFunction.Max(AA[z-1]);break;case 22:this.$=new AF.MathFunction.SquareRoot(AA[z-1]);break;case 23:this.$=new AF.MathFunction.Logarithm(AA[z-1]);break;case 24:this.$=new AF.MathFunction.Logarithm(new AF.MathFunction.Value(2),AA[z-1]);break;case 25:this.$=new AF.MathFunction.Logarithm(new AF.MathFunction.Value(10),AA[z-1]);break;case 26:this.$=new AF.MathFunction.NaturalLog(AA[z-1]);break;case 27:this.$=new AF.MathFunction.Arcsine(AA[z-1]);break;case 28:this.$=new AF.MathFunction.Arccosine(AA[z-1]);break;case 29:this.$=new AF.MathFunction.Arctangent(AA[z-1]);break;case 30:this.$=new AF.MathFunction.Arctangent2(AA[z-1]);break;case 31:this.$=new AF.MathFunction.Sine(AA[z-1]);break;case 32:this.$=new AF.MathFunction.Cosine(AA[z-1]);break;case 33:this.$=new AF.MathFunction.Tangent(AA[z-1]);break;case 34:this.$=new AF.MathFunction.HyperbolicSine(AA[z-1]);break;case 35:this.$=new AF.MathFunction.HyperbolicCosine(AA[z-1]);break;case 36:this.$=new AF.MathFunction.HyperbolicTangent(AA[z-1]);break;case 37:this.$=new AF.MathFunction.InverseHyperbolicSine(AA[z-1]);break;case 38:this.$=new AF.MathFunction.InverseHyperbolicCosine(AA[z-1]);break;case 39:this.$=new AF.MathFunction.InverseHyperbolicTangent(AA[z-1]);break;case 40:this.$=[AA[z]];break;case 41:this.$=AA[z-2].concat(AA[z]);break;}},table:[{3:1,4:2,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{1:[3]},{5:[1,36],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{5:[2,2],12:[2,2],13:[2,2],14:[2,2],15:[2,2],16:[2,2],17:[2,2],45:[2,2]},{5:[2,3],12:[2,3],13:[2,3],14:[2,3],15:[2,3],16:[2,3],17:[2,3],45:[2,3]},{5:[2,4],12:[2,4],13:[2,4],14:[2,4],15:[2,4],16:[2,4],17:[2,4],45:[2,4]},{5:[2,5],12:[2,5],13:[2,5],14:[2,5],15:[2,5],16:[2,5],17:[2,5],45:[2,5]},{5:[2,6],12:[2,6],13:[2,6],14:[2,6],15:[2,6],16:[2,6],17:[2,6],45:[2,6]},{4:42,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:43,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{11:[1,44]},{11:[1,45]},{11:[1,46]},{11:[1,47]},{11:[1,48]},{11:[1,49]},{11:[1,50]},{11:[1,51]},{11:[1,52]},{11:[1,53]},{11:[1,54]},{11:[1,55]},{11:[1,56]},{11:[1,57]},{11:[1,58]},{11:[1,59]},{11:[1,60]},{11:[1,61]},{11:[1,62]},{11:[1,63]},{11:[1,64]},{11:[1,65]},{11:[1,66]},{11:[1,67]},{11:[1,68]},{11:[1,69]},{1:[2,1]},{4:70,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:71,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:72,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:73,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:74,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{12:[1,75],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{5:[2,13],12:[2,13],13:[2,13],14:[2,13],15:[2,13],16:[2,13],17:[2,13],45:[2,13]},{4:76,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:77,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:78,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:80,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],22:79,23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:81,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:82,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:80,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],22:83,23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:80,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],22:84,23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:85,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:80,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],22:86,23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:87,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:88,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:89,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:90,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:91,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:92,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:80,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],22:93,23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:94,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:95,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:96,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:97,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:98,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:99,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:100,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:101,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:102,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{5:[2,8],12:[2,8],13:[2,8],14:[2,8],15:[1,39],16:[1,40],17:[1,41],45:[2,8]},{5:[2,9],12:[2,9],13:[2,9],14:[2,9],15:[1,39],16:[1,40],17:[1,41],45:[2,9]},{5:[2,10],12:[2,10],13:[2,10],14:[2,10],15:[2,10],16:[2,10],17:[1,41],45:[2,10]},{5:[2,11],12:[2,11],13:[2,11],14:[2,11],15:[2,11],16:[2,11],17:[1,41],45:[2,11]},{5:[2,12],12:[2,12],13:[2,12],14:[2,12],15:[2,12],16:[2,12],17:[2,12],45:[2,12]},{5:[2,7],12:[2,7],13:[2,7],14:[2,7],15:[2,7],16:[2,7],17:[2,7],45:[2,7]},{12:[1,103],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,104],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,105],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,106],45:[1,107]},{12:[2,40],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41],45:[2,40]},{12:[1,108],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,109],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,110],45:[1,107]},{12:[1,111],45:[1,107]},{12:[1,112],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,113],45:[1,107]},{12:[1,114],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,115],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,116],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,117],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,118],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,119],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,120],45:[1,107]},{12:[1,121],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,122],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,123],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,124],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,125],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,126],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,127],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,128],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,129],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{5:[2,14],12:[2,14],13:[2,14],14:[2,14],15:[2,14],16:[2,14],17:[2,14],45:[2,14]},{5:[2,15],12:[2,15],13:[2,15],14:[2,15],15:[2,15],16:[2,15],17:[2,15],45:[2,15]},{5:[2,16],12:[2,16],13:[2,16],14:[2,16],15:[2,16],16:[2,16],17:[2,16],45:[2,16]},{5:[2,17],12:[2,17],13:[2,17],14:[2,17],15:[2,17],16:[2,17],17:[2,17],45:[2,17]},{4:130,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{5:[2,18],12:[2,18],13:[2,18],14:[2,18],15:[2,18],16:[2,18],17:[2,18],45:[2,18]},{5:[2,19],12:[2,19],13:[2,19],14:[2,19],15:[2,19],16:[2,19],17:[2,19],45:[2,19]},{5:[2,20],12:[2,20],13:[2,20],14:[2,20],15:[2,20],16:[2,20],17:[2,20],45:[2,20]},{5:[2,21],12:[2,21],13:[2,21],14:[2,21],15:[2,21],16:[2,21],17:[2,21],45:[2,21]},{5:[2,22],12:[2,22],13:[2,22],14:[2,22],15:[2,22],16:[2,22],17:[2,22],45:[2,22]},{5:[2,23],12:[2,23],13:[2,23],14:[2,23],15:[2,23],16:[2,23],17:[2,23],45:[2,23]},{5:[2,24],12:[2,24],13:[2,24],14:[2,24],15:[2,24],16:[2,24],17:[2,24],45:[2,24]},{5:[2,25],12:[2,25],13:[2,25],14:[2,25],15:[2,25],16:[2,25],17:[2,25],45:[2,25]},{5:[2,26],12:[2,26],13:[2,26],14:[2,26],15:[2,26],16:[2,26],17:[2,26],45:[2,26]},{5:[2,27],12:[2,27],13:[2,27],14:[2,27],15:[2,27],16:[2,27],17:[2,27],45:[2,27]},{5:[2,28],12:[2,28],13:[2,28],14:[2,28],15:[2,28],16:[2,28],17:[2,28],45:[2,28]},{5:[2,29],12:[2,29],13:[2,29],14:[2,29],15:[2,29],16:[2,29],17:[2,29],45:[2,29]},{5:[2,30],12:[2,30],13:[2,30],14:[2,30],15:[2,30],16:[2,30],17:[2,30],45:[2,30]},{5:[2,31],12:[2,31],13:[2,31],14:[2,31],15:[2,31],16:[2,31],17:[2,31],45:[2,31]},{5:[2,32],12:[2,32],13:[2,32],14:[2,32],15:[2,32],16:[2,32],17:[2,32],45:[2,32]},{5:[2,33],12:[2,33],13:[2,33],14:[2,33],15:[2,33],16:[2,33],17:[2,33],45:[2,33]},{5:[2,34],12:[2,34],13:[2,34],14:[2,34],15:[2,34],16:[2,34],17:[2,34],45:[2,34]},{5:[2,35],12:[2,35],13:[2,35],14:[2,35],15:[2,35],16:[2,35],17:[2,35],45:[2,35]},{5:[2,36],12:[2,36],13:[2,36],14:[2,36],15:[2,36],16:[2,36],17:[2,36],45:[2,36]},{5:[2,37],12:[2,37],13:[2,37],14:[2,37],15:[2,37],16:[2,37],17:[2,37],45:[2,37]},{5:[2,38],12:[2,38],13:[2,38],14:[2,38],15:[2,38],16:[2,38],17:[2,38],45:[2,38]},{5:[2,39],12:[2,39],13:[2,39],14:[2,39],15:[2,39],16:[2,39],17:[2,39],45:[2,39]},{12:[2,41],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41],45:[2,41]}],defaultActions:{36:[2,1]},parseError:function v(z,y){throw new Error(z);
},parse:function w(AG){var AN=this,AD=[0],AW=[null],AI=[],AX=this.table,z="",AH=0,AU=0,AB=0,AF=2,AK=1;this.lexer.setInput(AG);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;if(typeof this.lexer.yylloc=="undefined"){this.lexer.yylloc={};}var AA=this.lexer.yylloc;AI.push(AA);if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError;}function AM(AZ){AD.length=AD.length-2*AZ;AW.length=AW.length-AZ;AI.length=AI.length-AZ;}function AL(){var AZ;AZ=AN.lexer.lex()||1;if(typeof AZ!=="number"){AZ=AN.symbols_[AZ]||AZ;}return AZ;}var AT,AP,AC,AS,AY,AJ,AR={},AO,AV,y,AE;while(true){AC=AD[AD.length-1];if(this.defaultActions[AC]){AS=this.defaultActions[AC];}else{if(AT==null){AT=AL();}AS=AX[AC]&&AX[AC][AT];}if(typeof AS==="undefined"||!AS.length||!AS[0]){if(!AB){AE=[];for(AO in AX[AC]){if(this.terminals_[AO]&&AO>2){AE.push("'"+this.terminals_[AO]+"'");}}var AQ="";if(this.lexer.showPosition){AQ="Parse error on line "+(AH+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+AE.join(", ");}else{AQ="Parse error on line "+(AH+1)+": Unexpected "+(AT==1?"end of input":("'"+(this.terminals_[AT]||AT)+"'"));}this.parseError(AQ,{text:this.lexer.match,token:this.terminals_[AT]||AT,line:this.lexer.yylineno,loc:AA,expected:AE});}if(AB==3){if(AT==AK){throw new Error(AQ||"Parsing halted.");}AU=this.lexer.yyleng;z=this.lexer.yytext;AH=this.lexer.yylineno;AA=this.lexer.yylloc;AT=AL();}while(1){if((AF.toString()) in AX[AC]){break;}if(AC==0){throw new Error(AQ||"Parsing halted.");}AM(1);AC=AD[AD.length-1];}AP=AT;AT=AF;AC=AD[AD.length-1];AS=AX[AC]&&AX[AC][AF];AB=3;}if(AS[0] instanceof Array&&AS.length>1){throw new Error("Parse Error: multiple actions possible at state: "+AC+", token: "+AT);}switch(AS[0]){case 1:AD.push(AT);AW.push(this.lexer.yytext);AI.push(this.lexer.yylloc);AD.push(AS[1]);AT=null;if(!AP){AU=this.lexer.yyleng;z=this.lexer.yytext;AH=this.lexer.yylineno;AA=this.lexer.yylloc;if(AB>0){AB--;}}else{AT=AP;AP=null;}break;case 2:AV=this.productions_[AS[1]][1];AR.$=AW[AW.length-AV];AR._$={first_line:AI[AI.length-(AV||1)].first_line,last_line:AI[AI.length-1].last_line,first_column:AI[AI.length-(AV||1)].first_column,last_column:AI[AI.length-1].last_column};AJ=this.performAction.call(AR,z,AU,AH,this.yy,AS[1],AW,AI);if(typeof AJ!=="undefined"){return AJ;}if(AV){AD=AD.slice(0,-1*AV*2);AW=AW.slice(0,-1*AV);AI=AI.slice(0,-1*AV);}AD.push(this.productions_[AS[1]][0]);AW.push(AR.$);AI.push(AR._$);y=AX[AD[AD.length-2]][AD[AD.length-1]];AD.push(y);break;case 3:return true;}}return true;}};var Y=(function(){var AB=({EOF:1,parseError:function AD(AG,AF){if(this.yy.parseError){this.yy.parseError(AG,AF);}else{throw new Error(AG);}},setInput:function(AF){this._input=AF;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};return this;},input:function(){var AG=this._input[0];this.yytext+=AG;this.yyleng++;this.match+=AG;this.matched+=AG;var AF=AG.match(/\n/);if(AF){this.yylineno++;}this._input=this._input.slice(1);return AG;},unput:function(AF){this._input=AF+this._input;return this;},more:function(){this._more=true;return this;},pastInput:function(){var AF=this.matched.substr(0,this.matched.length-this.match.length);return(AF.length>20?"...":"")+AF.substr(-20).replace(/\n/g,"");},upcomingInput:function(){var AF=this.match;if(AF.length<20){AF+=this._input.substr(0,20-AF.length);}return(AF.substr(0,20)+(AF.length>20?"...":"")).replace(/\n/g,"");},showPosition:function(){var AF=this.pastInput();var AG=new Array(AF.length+1).join("-");return AF+this.upcomingInput()+"\n"+AG+"^";},next:function(){if(this.done){return this.EOF;}if(!this._input){this.done=true;}var AJ,AH,AG,AF;if(!this._more){this.yytext="";this.match="";}var AK=this._currentRules();for(var AI=0;AI<AK.length;AI++){AH=this._input.match(this.rules[AK[AI]]);if(AH){AF=AH[0].match(/\n.*/g);if(AF){this.yylineno+=AF.length;}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:AF?AF[AF.length-1].length-1:this.yylloc.last_column+AH[0].length};this.yytext+=AH[0];this.match+=AH[0];this.matches=AH;this.yyleng=this.yytext.length;this._more=false;this._input=this._input.slice(AH[0].length);this.matched+=AH[0];AJ=this.performAction.call(this,this.yy,this,AK[AI],this.conditionStack[this.conditionStack.length-1]);if(AJ){return AJ;}else{return;}}}if(this._input===""){return this.EOF;}else{this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno});}},lex:function y(){var AF=this.next();if(typeof AF!=="undefined"){return AF;}else{return this.lex();}},begin:function z(AF){this.conditionStack.push(AF);},popState:function AE(){return this.conditionStack.pop();},_currentRules:function AC(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules;}});AB.performAction=function AA(AJ,AG,AI,AF){var AH=AF;switch(AI){case 0:return 6;break;case 1:return 6;break;case 2:return 6;break;case 3:return 6;break;case 4:return 6;break;case 5:return 6;break;case 6:return 8;break;case 7:return 8;break;case 8:return 7;break;case 9:return 9;break;case 10:return 15;break;case 11:return 16;break;case 12:return 14;break;case 13:return 13;break;case 14:return 17;break;case 15:return 11;break;case 16:return 12;break;case 17:return 45;break;case 18:return 23;break;case 19:return 24;break;case 20:return 18;break;case 21:return 19;break;case 22:return 20;break;case 23:return 21;break;case 24:return 26;break;case 25:return 25;break;case 26:return 27;break;case 27:return 28;break;case 28:return 29;break;case 29:return 30;break;case 30:return 31;break;case 31:return 32;break;case 32:return 33;break;case 33:return 34;break;case 34:return 35;break;case 35:return 36;break;case 36:return 37;break;case 37:return 38;break;case 38:return 39;break;case 39:return 40;break;case 40:return 41;break;case 41:return 42;
break;case 42:return 43;break;case 43:return 44;break;case 44:return 10;break;case 45:break;case 46:return 5;break;}};AB.rules=[/^0[xX][0-9a-fA-F]+/,/^[0-9]+[eE][-+]?[0-9]+/,/^[0-9]+\.([0-9]+)?([eE][-+]?[0-9]+)?/,/^([0-9]+)?\.[0-9]+([eE][-+]?[0-9]+)?/,/^[1-9][0-9]*/,/^0\b/,/^pi\b/,/^\u03c0/,/^e\b/,/^i\b/,/^\*/,/^\//,/^-/,/^\+/,/^\^/,/^\(/,/^\)/,/^,/,/^re\b/,/^im\b/,/^abs\b/,/^phase\b/,/^conjugate\b/,/^rotate\b/,/^max\b/,/^min\b/,/^sqrt\b/,/^log\b/,/^log2\b/,/^log10\b/,/^ln\b/,/^arcsin\b/,/^arccos\b/,/^arctan\b/,/^arctan2\b/,/^sin\b/,/^cos\b/,/^tan\b/,/^sinh\b/,/^cosh\b/,/^tanh\b/,/^arcsinh\b/,/^arccosh\b/,/^arctanh\b/,/^[^-*/+^(),\s0-9][^-*/+^(),\s]*/,/^\s+/,/^$/];AB.conditions={"INITIAL":{"rules":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],"inclusive":true}};return AB;})();x.lexer=Y;return x;})();if(typeof require!=="undefined"&&typeof exports!=="undefined"){exports.parser=i;exports.parse=function(){return i.parse.apply(i,arguments);};exports.main=function B(Y){if(!Y[1]){throw new Error("Usage: "+Y[0]+" FILE");}if(typeof process!=="undefined"){var u=require("fs").readFileSync(require("path").join(process.cwd(),Y[1]),"utf8");}else{var t=require("file").path(require("file").cwd());var u=t.join(Y[1]).read({charset:"utf-8"});}return exports.parser.parse(u);};if(typeof module!=="undefined"&&require.main===module){exports.main(typeof process!=="undefined"?process.argv.slice(1):require("system").args);}}function M(Y){M.superclass.constructor.call(this,Y);}M.NAME="MathCanvas";M.ATTRS={func:{value:new E.MathFunction.Value(0),setter:function(Y){return E.Lang.isString(Y)?E.MathCanvas.Parser.parse(Y):Y;}},fontName:{value:"sans-serif",validator:E.Lang.isString},fontSize:{value:1,validator:E.Lang.isNumber},minWidth:{value:100,validator:E.Lang.isNumber},minHeight:{value:100,validator:E.Lang.isNumber}};function g(t){var u=t.charAt(0).toUpperCase()+t.substr(1);var Y=Math.max(this.get("min"+u),this["render_"+t]+5);this.set(t,Y+"px");this.canvas.setAttribute(t,Y);}E.extend(M,E.Widget,{initializer:function(v){this.after("funcChange",function(){this.selection=-1;this._renderExpression();});this.after("fontNameChange",this._renderExpression);this.after("fontSizeChange",this._renderExpression);this.after("minWidthChange",this._renderExpression);this.after("minHeightChange",this._renderExpression);var w=navigator.userAgent.toLowerCase();var Y=navigator.platform;var u=w.indexOf("series60")!=-1||w.indexOf("symbian")!=-1||w.indexOf("windows ce")!=-1||w.indexOf("blackberry")!=-1;var z=typeof orientation!="undefined";var y="ontouchstart" in document.documentElement;var x=Y.indexOf("iPhone")!=-1||Y.indexOf("iPad")!=-1;var t=w.indexOf("android")!=-1||(!x&&!u&&y&&z);this.touch=y||w.indexOf("iphone")!=-1;},renderUI:function(){var t=this.get("contentBox");var Y=this.get("minWidth");this.set("width",Y+"px");var v=this.get("minHeight");this.set("height",Y+"px");this.canvas=E.Node.create('<canvas width="'+Y+'" height="'+v+'" tabindex="0"></canvas>');if(!this.canvas){throw Error("This browser does not support canvas rendering.");}t.appendChild(this.canvas);this.context=new E.Canvas.Context2d(this.canvas);E.mix(this.context,V);this.context.math_canvas=this;this._renderExpression();function u(x){var w=E.Array.reduce(x,"",function(y,z){return y+E.Lang.sub('<button type="button" class="keyboard-{value}" value="{value}">{label}</button>',{value:z.value||z,label:z.label||z});});return"<p>"+w+"</p>";}if(this.touch||YUI.config.debug_mathcanvas_keyboard){this.keyboard=E.Node.create('<div class="keyboard">'+u([1,2,3,4,5,6,7,8,9,0])+u(["+",{value:"-",label:"&ndash;"},{value:"*",label:"&times;"},"/","^","|",",","e","\u03c0","."])+'<p class="last">'+'<button type="button" class="keyboard-hide" value="hide" title="Hide keyboard">&dArr;</button>'+'<button type="button" class="keyboard-eval" value="=" title="Evaluate expression">=</button>'+'<button type="button" class="keyboard-delete" value="delete" title="Delete selection">&empty;</button>'+'<button type="button" class="keyboard-expand" value="expand" title="Expand selection">&hArr;</button>'+'<select class="keyboard-func">'+"<option>Functions</option>"+"<optgroup>"+"<option>abs</option>"+"<option>arccos</option>"+"<option>arcsin</option>"+"<option>arctan</option>"+"<option>arctan2</option>"+"<option>conjugate</option>"+"<option>cos</option>"+"<option>cosh</option>"+"<option>sinh</option>"+"<option>tanh</option>"+"<option>imag</option>"+"<option>arccosh</option>"+"<option>arcsinh</option>"+"<option>arctanh</option>"+"<option>log</option>"+"<option>max</option>"+"<option>min</option>"+"<option>ln</option>"+"<option>phase</option>"+"<option>real</option>"+"<option>rotate</option>"+"<option>sin</option>"+"<option>sqrt</option>"+"<option>tan</option>"+"</optgroup>"+"</select>"+"<br>"+'<select class="keyboard-const">'+"<option>Constants</option>"+"<optgroup>"+"<option>c</option>"+"<option>g</option>"+"</optgroup>"+"</select>"+"</p>"+"</div>");t.appendChild(this.keyboard);this.keyboard.setStyle("bottom",(-this.keyboard.get("offsetHeight"))+"px");}},bindUI:function(){this.canvas.on("mousedown",function(x){function Y(AB){var AA=this.canvas.getXY();var z=[Math.round(AB.pageX-AA[0])-y[0],Math.round(AB.pageY-AA[1])-y[1]];this.selection=this.rect_list.getSelection(t,z);this._renderExpression();}var v=this.rect_list.getBounds();var y=[Math.floor((this.canvas.getAttribute("width")-L.width(v))/2),Math.floor((this.canvas.getAttribute("height")-L.height(v))/2)];var w=this.canvas.getXY();var t=[Math.round(x.pageX-w[0])-y[0],Math.round(x.pageY-w[1])-y[1]];Y.call(this,x);var u=this.canvas.on("mousemove",Y,this);E.one(E.config.doc).once("mouseup",function(z){u.detach();if(this.selection>=0){this.showKeyboard();}else{this.hideKeyboard();}},this);},this);this.canvas.on("keydown",function(Y){if(Y.charCode==32){this.expandSelection();}else{if(Y.charCode==8){this.deleteSelection();}}},this);if(this.keyboard){this.keyboard.delegate("click",function(Y){var t=Y.currentTarget.get("value");
if(t=="hide"){this.hideKeyboard();}else{if(t=="expand"){this.expandSelection();}else{if(t=="delete"){this.deleteSelection();}else{if(t=="="){this.fire("evaluate");this.hideKeyboard();}}}}},"button",this);this.keyboard.one(".keyboard-func").on("change",function(Y){this.set("selectedIndex",0);});this.keyboard.one(".keyboard-const").on("change",function(Y){this.set("selectedIndex",0);});}},destructor:function(){this.canvas=null;this.context=null;},showKeyboard:function(){if(!this.keyboard){return;}if(this.keyboard_anim){this.keyboard_anim.stop();}this.keyboard_anim=new E.Anim({node:this.keyboard,to:{bottom:0},duration:0.5});this.keyboard_anim.run();},hideKeyboard:function(){if(!this.keyboard){return;}if(this.keyboard_anim){this.keyboard_anim.stop();}this.keyboard_anim=new E.Anim({node:this.keyboard,to:{bottom:-this.keyboard.get("offsetHeight")},duration:0.5});this.keyboard_anim.run();},expandSelection:function(){if(this.selection>=0){var Y=this.rect_list.get(this.selection).func.getParent();if(Y){this.selection=this.rect_list.findIndex(Y);this._renderExpression();}}},deleteSelection:function(){if(this.selection>=0){this.deleteFunction(this.rect_list.get(this.selection).func);}},deleteFunction:function(t){var u=t.getParent();var Y=u;if(!u){this.selection=0;this.set("func","0");return;}else{if(u.getArgCount()==1){this.deleteFunction(u);return;}else{if(u.getArgCount()==2){var Y=(u.getArg(0)==t?u.getArg(1):u.getArg(0));var v=u.getParent();if(v){v.replaceArg(u,Y);}else{this.selection=-1;Y.parent=null;this.set("func",Y);}}else{u.removeArg(t);}}}this.selection=-1;this._renderExpression();this.selection=this.rect_list.findIndex(Y);this._renderExpression();},_renderExpression:function(){this.context.clearRect(0,0,this.canvas.getAttribute("width"),this.canvas.getAttribute("height"));var v=this.get("func");if(!v){return;}this.rect_list=new L();var Y={x:0,y:0};v.prepareToRender(this.context,Y,100,this.rect_list);var u=this.rect_list.getBounds();this.render_width=L.width(u);g.call(this,"width");this.render_height=L.height(u);g.call(this,"height");this.context.save();this.context.translate(Math.floor((this.canvas.getAttribute("width")-L.width(u))/2),Math.floor((this.canvas.getAttribute("height")-L.height(u))/2));if(this.selection>=0){var t=this.rect_list.get(this.selection).rect;this.context.save();this.context.set("fillStyle","#99FFFF");this.context.fillRect(t.left,t.top,L.width(t),L.height(t));this.context.restore();}v.render(this.context,this.rect_list);this.context.restore();}});var H=Math.PI/6;var V={drawString:function(w,t,Y,v){var u=this.getLineHeight(Y);this._setFont(Y);this.set("textBaseline","top");this.fillText(v,w,Math.floor(t-u/2));},getLineHeight:function(Y){return(13*this.math_canvas.get("fontSize")*Y/100);},getStringWidth:function(Y,u){this.save();this._setFont(Y);var t=this.measureText(u).width;this.restore();return t;},_setFont:function(Y){this.set("font",(this.math_canvas.get("fontSize")*Y/100)+"em "+this.math_canvas.get("fontName"));},getSuperSubFontSize:function(Y){var t=Y*0.6;return Math.max(t,40);},getSuperscriptHeight:function(Y){return L.height(Y)/2;},getSubscriptDepth:function(Y){return L.height(Y)/2;},drawSquareBrackets:function(u){var t=u.bottom-u.top;var Y=this.getSquareBracketWidth(u)-2;this.moveTo(u.left-2,u.top);this.line(-Y,0);this.line(0,t-1);this.line(Y,0);this.stroke();this.moveTo(u.right+1,u.top);this.line(Y,0);this.line(0,t-1);this.line(-Y,0);this.stroke();},getSquareBracketWidth:function(t){var Y=t.bottom-t.top;return Math.round(3+((Y-1)/10));},drawParentheses:function(w){var v=w.bottom-w.top;var Y=v/(2*Math.sin(H));var t=Math.round(Y);var x=L.ycenter(w);var u=this.getParenthesisWidth(w);this.beginPath();this.arc(w.left-u+Y,x,t,Math.PI-H,Math.PI+H,false);this.stroke();this.beginPath();this.arc(w.right+u-Y,x,t,H,-H,true);this.stroke();},getParenthesisWidth:function(t){var Y=t.bottom-t.top;return 2+Math.round(0.5+(Y*(1-Math.cos(H)))/(2*Math.sin(H)));},drawVerticalBar:function(Y){this.moveTo(Y.left+1,Y.top);this.lineTo(Y.left+1,Y.bottom);this.stroke();},getVerticalBarWidth:function(){return 3;},drawHorizontalBar:function(Y){var t=Y.top+1;this.moveTo(Y.left,t);this.lineTo(Y.right-1,t);this.stroke();},getHorizontalBarHeight:function(){return 3;}};i.yy.MathFunction=E.MathFunction;E.MathCanvas=M;E.MathCanvas.RectList=L;E.MathCanvas.Parser=i;},"@VERSION@",{skinnable:true,requires:["widget","collection","node-screen","gallery-complexnumber","gallery-canvas","gallery-node-optimizations","anim-base","array-extras"]});