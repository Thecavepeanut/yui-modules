YUI.add("gallery-node-optimizations",function(D){var E=/^\.([-_a-z0-9]+)$/i;var A=/^[a-z]+$/i;var B=D.Node.prototype.ancestor;D.Node.prototype.ancestor=function(G,H){if(D.Lang.isString(G)){var F=E.exec(G);if(F&&F.length){return this.getAncestorByClassName(F[1],H);}if(A.test(G)){return this.getAncestorByTagName(G,H);}}return B.apply(this,arguments);};D.Node.prototype.getAncestorByClassName=function(G,F){var H=this._node;if(!F){H=H.parentNode;}while(H&&!D.DOM.hasClass(H,G)){H=H.parentNode;if(!H||!H.tagName){return null;}}return D.one(H);};D.Node.prototype.getAncestorByTagName=function(H,F){var G=this._node;if(!F){G=G.parentNode;}H=H.toLowerCase();while(G&&G.tagName.toLowerCase()!=H){G=G.parentNode;if(!G||!G.tagName){return null;}}return D.one(G);};var C=D.Node.prototype.all;D.Node.prototype.all=function(G){if(D.Lang.isString(G)){var F=E.exec(G);if(F&&F.length){return this.getElementsByClassName(F[1]);}if(A.test(G)){return this.getElementsByTagName(G);}}return C.apply(this,arguments);};D.Node.prototype.getElementsByClassName=function(I,K){var L=this.getElementsByTagName(K||"*");var H=null;var G=L.size();for(var F=0;F<G;F++){var J=L.item(F);if(D.DOM.hasClass(D.Node.getDOMNode(J),I)){if(!H){H=new D.NodeList(J);}else{H.push(J);}}}if(!H){H=new D.NodeList("#surely-this-cannot-possibly-exist-on-your-page");}return H;};},"@VERSION@",{requires:["node-base"]});