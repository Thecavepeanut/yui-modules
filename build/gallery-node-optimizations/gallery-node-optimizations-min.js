YUI.add("gallery-node-optimizations",function(F){var E=/^([a-z]*)\.([-_a-z0-9]+)$/i;var G=/^\.([-_a-z0-9]+)$/i;var A=/^[a-z]+$/i;F.Node.class_re_prefix="(?:^|\\s)(?:";F.Node.class_re_suffix=")(?:\\s|$)";var B=F.Node.prototype.ancestor;F.Node.prototype.ancestor=function(I,J){if(F.Lang.isString(I)){var H=G.exec(I);if(H&&H.length){return this.getAncestorByClassName(H[1],J);}if(A.test(I)){return this.getAncestorByTagName(I,J);}}return B.apply(this,arguments);};F.Node.prototype.getAncestorByClassName=function(I,H){var J=this._node;if(!H){J=J.parentNode;}while(J&&!F.DOM.hasClass(J,I)){J=J.parentNode;if(!J||!J.tagName){return null;}}return F.one(J);};F.Node.prototype.getAncestorByTagName=function(J,H){var I=this._node;if(!H){I=I.parentNode;}J=J.toLowerCase();while(I&&I.tagName.toLowerCase()!=J){I=I.parentNode;if(!I||!I.tagName){return null;}}return F.one(I);};var C=F.Node.prototype.one;F.Node.prototype.one=function(I){if(F.Lang.isString(I)){if(I=="*"){return F.one(F.Node.getDOMNode(this).children[0]);}var H=E.exec(I);if(H&&H.length){return this.getFirstElementByClassName(H[2],H[1]);}if(A.test(I)){return this.getElementsByTagName(I).item(0);}}return C.apply(this,arguments);};var D=F.Node.prototype.all;F.Node.prototype.all=function(I){if(F.Lang.isString(I)){var H=E.exec(I);if(H&&H.length){return this.getElementsByClassName(H[2],H[1]);}if(A.test(I)){return this.getElementsByTagName(I);}}return D.apply(this,arguments);};F.Node.prototype.getElementsByClassName=function(J,L){var M=F.Node.getDOMNode(this).getElementsByTagName(L||"*");var I=new F.NodeList();for(var H=0;H<M.length;H++){var K=M[H];if(F.DOM.hasClass(K,J)){I.push(K);}}return I;};F.Node.prototype.getFirstElementByClassName=function(J,H){if(!H||H=="*"||H=="div"){var P=[F.Node.getDOMNode(this)],N=[];while(P.length){for(var L=0;L<P.length;L++){var O=P[L];for(var K=0;K<O.children.length;K++){var M=O.children[K];if(F.DOM.hasClass(M,J)){return F.one(M);}N.push(M);}}P=N;N=[];}}else{var I=F.Node.getDOMNode(this).getElementsByTagName(H||"*");for(var L=0;L<I.length;L++){var M=I[L];if(F.DOM.hasClass(M,J)){return F.one(M);}}}return null;};},"@VERSION@",{requires:["node-base"]});