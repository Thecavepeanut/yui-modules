YUI.add("gallery-mathcanvas",function(c){function e(){this.list=[];}e.width=function(J){return J.right-J.left;};e.height=function(J){return J.bottom-J.top;};e.xcenter=function(J){return Math.floor((J.left+J.right)/2);};e.ycenter=function(J){return Math.floor((J.top+J.bottom)/2);};e.cover=function(K,J){var L={top:Math.min(K.top,J.top),left:Math.min(K.left,J.left),bottom:Math.max(K.bottom,J.bottom),right:Math.max(K.right,J.right)};return L;};e.prototype={add:function(M,K,J,L){this.list.push({rect:M,midline:K,font_size:J,func:L});return this.list.length-1;},get:function(J){return this.list[J];},find:function(J){return c.Array.find(this.list,function(K){return(K.func===J);});},findIndex:function(J){return c.Array.indexOf(this.list,this.find(J));},shift:function(L,K,J){if(K===0&&J===0){return;}var M=this.list[L];var N=c.clone(M.rect);M.rect.top+=J;M.rect.left+=K;M.rect.bottom+=J;M.rect.right+=K;M.midline+=J;c.Array.each(this.list,function(O){if(N.left<=O.rect.left&&O.rect.right<=N.right&&N.top<=O.rect.top&&O.rect.bottom<=N.bottom){O.rect.top+=J;O.rect.left+=K;O.rect.bottom+=J;O.rect.right+=K;O.midline+=J;}});},setMidline:function(J,K){this.shift(J,0,K-this.list[J].midline);},getBounds:function(){return this.list[this.list.length-1].rect;}};function k(){}k.prototype={prepareToRender:function(M,L,K,J){var N=this.toString();var O={top:L.y,left:L.x,bottom:L.y+M.getLineHeight(K),right:L.x+M.getStringWidth(K,N)};return J.add(O,e.ycenter(O),K,this);},render:function(K,J){var L=J.find(this);K.drawString(L.rect.left,L.midline,L.font_size,this.toString());},parenthesizeForPrint:function(J){return(this instanceof x);},parenthesizeForRender:function(J){return(this instanceof x);}};k.updateSum=function(J,K){if(J instanceof i){J.appendArg(K);return J;}else{return new i(J,K);}};c.MathFunction=k;function t(J){t.superclass.constructor.call(this);this.value=parseInt(J);}c.extend(t,k,{evaluate:function(){return this.value;},toString:function(){return this.value;}});k.Value=t;function C(){C.superclass.constructor.call(this);}c.extend(C,k,{evaluate:function(){return Math.PI;},toString:function(){return"\u03c0";}});k.Pi=C;function b(){b.superclass.constructor.call(this);}c.extend(b,k,{evaluate:function(){return Math.E;},toString:function(){return"e";}});k.E=b;function H(){H.superclass.constructor.call(this);}c.extend(H,k,{evaluate:function(){return c.ComplexMath.I;},toString:function(){return"i";}});k.I=H;function x(K,J){x.superclass.constructor.call(this);this.name=K;if(c.Lang.isArray(J)&&c.Lang.isArray(J[0])){J=J[0];}if(c.Lang.isArray(J)){this.args=c.Array(J);}else{this.args=[];for(var L=1;L<arguments.length;L++){this.args.push(arguments[L]);}}}c.extend(x,k,{appendArg:function(J){this.args.push(J);},replaceArg:function(J,L){var K=c.Array.indexOf(this.args,J);if(K>=0){this.args[K]=L;}},evaluateArgs:function(){var J=[];c.Array.each(this.args,function(K){J.push(K.evaluate());});return J;},prepareToRender:function(K,V,O,W){var J={top:V.y,left:V.x,bottom:V.y+K.getLineHeight(O),right:V.x+K.getStringWidth(O,this.name)};var T=e.ycenter(J);var U=T;var L={x:J.right,y:J.top};var R=K.getStringWidth(O,", ");var Y=this.args.length;var S=[];for(var Q=0;Q<Y;Q++){var P=this.args[Q].prepareToRender(K,L,O,W);var N=W.get(P);var M=N.rect;L.x=M.right+R;J=e.cover(J,M);T=Math.max(T,N.midline);S.push(P);}if(Y>1&&T>U){for(var Q=0;Q<Y;Q++){var P=S[Q];W.setMidline(P,T);J=e.cover(J,W.get(P).rect);}}var X=K.getParenthesisWidth(J);for(var Q=0;Q<Y;Q++){W.shift(S[Q],X,0);}J.right+=2*X;return W.add(J,T,O,this);},render:function(M,J){var O=J.find(this);M.drawString(O.rect.left,O.midline,O.font_size,this.name);var N={top:O.rect.top,bottom:O.rect.bottom};for(var L=0;L<this.args.length;L++){this.args[L].render(M,J);var O=J.find(this.args[L]);var K=O.rect;if(L===0){N.left=K.left;}if(L<this.args.length-1){M.drawString(K.right,O.midline,O.font_size,",");}else{N.right=K.right;M.drawParentheses(N);}}},toString:function(){return this.name+"("+this.args.join(",")+")";}});k.FunctionWithArgs=x;function E(J){E.superclass.constructor.call(this,"-",J);}c.extend(E,x,{evaluate:function(){return c.ComplexMath.subtract(0,this.args[0].evaluate());},prepareToRender:function(L,P,N,Q){var R=L.getStringWidth(N,"-");var M=c.clone(P);var S=this.args[0];var K={top:P.y,left:P.x,bottom:P.y+L.getLineHeight(N),right:M.x};var T=S.prepareToRender(L,M,N,Q);var J=Q.get(T);if(S.parenthesizeForRender(this)){var O=L.getParenthesisWidth(J.rect);Q.shift(T,O,0);K.right=J.rect.right+O;}K=e.cover(K,J.rect);return Q.add(K,J.midline,N,this);},render:function(M,K){var N=K.find(this);M.drawString(N.rect.left,N.midline,N.font_size,"-");var J=this.args[0];J.render(M,K);if(J.parenthesizeForRender(this)){var L=K.find(J);M.drawParentheses(L.rect);}},toString:function(){var K="-";var J=this.args[0];if(J.parenthesizeForPrint(this)){K+="(";K+=J;K+=")";}else{K+=J;}return K;}});k.Negate=E;function i(){I.superclass.constructor.call(this,"+",new c.Array(arguments));}c.extend(i,x,{evaluate:function(){return c.ComplexMath.add(this.evaluateArgs());},prepareToRender:function(K,R,N,S){var L=c.clone(R);var J={top:R.y,left:R.x,bottom:R.y+K.getLineHeight(N),right:R.x};var P=e.ycenter(J);var Q=P;var M=K.getStringWidth(N," ");var O=K.getStringWidth(N,"+");var T=K.getStringWidth(N,"-");c.Array.each(this.args,function(U,W){var Y=this;if(U instanceof E){if(W>0){L.x+=M;}L.x+=T+M;Y=U;U=U.args[0];}else{if(W>0){L.x+=O+2*M;}}var V=U.prepareToRender(K,L,N,S);var X=S.get(V);L.x=X.rect.right;if(U.parenthesizeForRender(Y)){var Z=K.getParenthesisWidth(X.rect);S.shift(V,Z,0);L.x+=2*Z;J.right=X.rect.right+Z;}J=e.cover(J,X.rect);P=Math.max(P,X.midline);},this);if(this.args.length>1&&P>Q){c.Array.each(this.args,function(U){if(U instanceof E){U=U.args[0];}var V=S.findIndex(U);S.setMidline(V,P);J=e.cover(J,S.get(V).rect);});}return S.add(J,P,N,this);},render:function(L,K){var N=K.find(this);var J=N.rect.left;var M=L.getStringWidth(N.font_size," ");c.Array.each(this.args,function(O,P){var R=this;if(O instanceof E){L.drawString(J,N.midline,N.font_size,"-");
R=O;O=O.args[0];}else{if(P>0){L.drawString(J,N.midline,N.font_size,"+");}}O.render(L,K);var Q=K.find(O);J=Q.rect.right;if(O.parenthesizeForRender(R)){L.drawParentheses(Q.rect);J+=L.getParenthesisWidth(Q.rect);}J+=M;},this);},toString:function(){var J="";c.Array.each(this.args,function(K,L){if(K instanceof E){J+="-";K=K.args[0];}else{if(L>0){J+="+";}}if(K.parenthesizeForPrint(this)){J+="(";J+=K;J+=")";}else{J+=K;}},this);return J;}});k.Sum=i;function d(J){d.superclass.constructor.call(this,"abs",J);}c.extend(d,x,{evaluate:function(){return c.ComplexMath.abs(this.args[0].evaluate());},prepareToRender:function(M,O,N,P){var K=M.getVerticalBarWidth();var Q=this.args[0];var R=Q.prepareToRender(M,O,N,P);var L=P.get(R);P.shift(R,K,0);var J={top:O.y,left:O.x,bottom:L.rect.bottom,right:L.rect.right+K};return P.add(J,L.midline,N,this);},render:function(K,J){var M=J.find(this);K.drawVerticalBar(M.rect);this.args[0].render(K,J);var L=c.clone(M.rect);L.left=L.right-K.getVerticalBarWidth();K.drawVerticalBar(L);}});k.Magnitude=d;function f(J){f.superclass.constructor.call(this,"phase",J);}c.extend(f,x,{evaluate:function(){return c.ComplexMath.phase(this.args[0].evaluate());}});k.Phase=f;function B(){B.superclass.constructor.call(this,"min",new c.Array(arguments));}c.extend(B,x,{evaluate:function(){return Math.min.apply(null,this.evaluateArgs());}});k.Min=B;function I(){I.superclass.constructor.call(this,"max",new c.Array(arguments));}c.extend(I,x,{evaluate:function(){return Math.max.apply(null,this.evaluateArgs());}});k.Max=I;function o(J){o.superclass.constructor.call(this,"sqrt",J);}c.extend(o,x,{evaluate:function(){return c.ComplexMath.sqrt(this.args[0].evaluate());},prepareToRender:function(L,R,O,S){var T=this.args[0];var U=T.prepareToRender(L,R,O,S);var K=S.get(U);var Q=e.height(K.rect);var N=1+Math.round(2*Q/(4*Math.sqrt(3)));var P=3;var M=4;S.shift(U,N,M);var J={top:R.y,left:R.x,bottom:K.rect.bottom,right:K.rect.right+P};return S.add(J,K.midline,O,this);},render:function(K,J){var L=J.find(this);this._drawSquareRoot(K,L.rect);this.args[0].render(K,J);},_drawSquareRoot:function(L,N){var M=e.height(N);var J=N.left;var O=N.top+Math.round(3*M/4);var K=Math.round((M-3)/(4*Math.sqrt(3)));L.beginPath();L.moveTo(J,O);J+=K;O=N.bottom-1;L.lineTo(J,O);J+=K;O=N.top+2;L.lineTo(J,O);J=N.right-1;L.lineTo(J,O);L.line(0,Math.round(M/8));L.stroke();}});k.SquareRoot=o;function g(J){g.superclass.constructor.call(this,"ln",J);}c.extend(g,x,{evaluate:function(){return c.ComplexMath.log(this.args[0].evaluate());}});k.NaturalLog=g;function j(J){j.superclass.constructor.call(this,"sin",J);}c.extend(j,x,{evaluate:function(){return c.ComplexMath.sin(this.args[0].evaluate());}});k.Sine=j;function A(J){A.superclass.constructor.call(this,"cos",J);}c.extend(A,x,{evaluate:function(){return c.ComplexMath.cos(this.args[0].evaluate());}});k.Cosine=A;function n(J){n.superclass.constructor.call(this,"tan",J);}c.extend(n,x,{evaluate:function(){return c.ComplexMath.tan(this.args[0].evaluate());}});k.Tangent=n;function l(J){l.superclass.constructor.call(this,"arcsin",J);}c.extend(l,x,{evaluate:function(){return Math.asin(this.args[0].evaluate());}});k.Arcsine=l;function q(J){q.superclass.constructor.call(this,"arccos",J);}c.extend(q,x,{evaluate:function(){return Math.acos(this.args[0].evaluate());}});k.Arccosine=q;function p(J){p.superclass.constructor.call(this,"arctan",J);}c.extend(p,x,{evaluate:function(){return Math.atan(this.args[0].evaluate());}});k.Arctangent=p;function y(K,J){y.superclass.constructor.call(this,"arctan2",K,J);}c.extend(y,x,{evaluate:function(){return Math.atan2(this.args[0].evaluate(),this.args[1].evaluate());}});k.Arctangent2=y;function G(J){G.superclass.constructor.call(this,"cosh",J);}c.extend(G,x,{evaluate:function(){return c.ComplexMath.cosh(this.args[0].evaluate());}});k.HyperbolicCosine=G;function m(J){m.superclass.constructor.call(this,"sinh",J);}c.extend(m,x,{evaluate:function(){return c.ComplexMath.sinh(this.args[0].evaluate());}});k.HyperbolicSine=m;function r(J){r.superclass.constructor.call(this,"tanh",J);}c.extend(r,x,{evaluate:function(){return c.ComplexMath.tanh(this.args[0].evaluate());}});k.HyperbolicTangent=r;function w(J){w.superclass.constructor.call(this,"arccosh",J);}c.extend(w,x,{evaluate:function(){return c.ComplexMath.acosh(this.args[0].evaluate());}});k.InverseHyperbolicCosine=w;function a(J){a.superclass.constructor.call(this,"arcsinh",J);}c.extend(a,x,{evaluate:function(){return c.ComplexMath.asinh(this.args[0].evaluate());}});k.InverseHyperbolicSine=a;function h(J){h.superclass.constructor.call(this,"arctanh",J);}c.extend(h,x,{evaluate:function(){return c.ComplexMath.atanh(this.args[0].evaluate());}});k.InverseHyperbolicTangent=h;var D=(function(){var O={trace:function L(){},yy:{},symbols_:{"error":2,"expressions":3,"e":4,"EOF":5,"NUMBER":6,"E":7,"PI":8,"I":9,"(":10,")":11,"+":12,"-":13,"*":14,"/":15,"^":16,"ABS":17,"PHASE":18,"MIN":19,"arglist":20,"MAX":21,"SQRT":22,"LN":23,"ARCSIN":24,"ARCCOS":25,"ARCTAN":26,"SIN":27,"COS":28,"TAN":29,"SINH":30,"COSH":31,"TANH":32,"ARCSINH":33,"ARCCOSH":34,"ARCTANH":35,",":36,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",6:"NUMBER",7:"E",8:"PI",9:"I",10:"(",11:")",12:"+",13:"-",14:"*",15:"/",16:"^",17:"ABS",18:"PHASE",19:"MIN",21:"MAX",22:"SQRT",23:"LN",24:"ARCSIN",25:"ARCCOS",26:"ARCTAN",27:"SIN",28:"COS",29:"TAN",30:"SINH",31:"COSH",32:"TANH",33:"ARCSINH",34:"ARCCOSH",35:"ARCTANH",36:","},productions_:[0,[3,2],[4,1],[4,1],[4,1],[4,1],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,2],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[20,1],[20,3]],performAction:function K(P,S,T,W,V,R,U){var Q=R.length-1;switch(V){case 1:return R[Q-1];break;case 2:this.$=new W.MathFunction.Value(P);break;case 3:this.$=new W.MathFunction.E();break;case 4:this.$=new W.MathFunction.Pi();break;case 5:this.$=new W.MathFunction.I();break;case 6:this.$=R[Q-1];break;case 7:this.$=W.MathFunction.updateSum(R[Q-2],R[Q]);break;
case 8:this.$=W.MathFunction.updateSum(R[Q-2],new W.MathFunction.Negate(R[Q]));break;case 9:this.$=R[Q-2]*R[Q];break;case 10:this.$=R[Q-2]/R[Q];break;case 11:this.$=Math.pow(R[Q-2],R[Q]);break;case 12:this.$=new W.MathFunction.Negate(R[Q]);break;case 13:this.$=new W.MathFunction.Magnitude(R[Q-1]);break;case 14:this.$=new W.MathFunction.Phase(R[Q-1]);break;case 15:this.$=new W.MathFunction.Min(R[Q-1]);break;case 16:this.$=new W.MathFunction.Max(R[Q-1]);break;case 17:this.$=new W.MathFunction.SquareRoot(R[Q-1]);break;case 18:this.$=new W.MathFunction.NaturalLog(R[Q-1]);break;case 19:this.$=new W.MathFunction.Arcsine(R[Q-1]);break;case 20:this.$=new W.MathFunction.Arccosine(R[Q-1]);break;case 21:this.$=new W.MathFunction.Arctangent(R[Q-1]);break;case 22:this.$=new W.MathFunction.Sine(R[Q-1]);break;case 23:this.$=new W.MathFunction.Cosine(R[Q-1]);break;case 24:this.$=new W.MathFunction.Tangent(R[Q-1]);break;case 25:this.$=new W.MathFunction.HyperbolicSine(R[Q-1]);break;case 26:this.$=new W.MathFunction.HyperbolicCosine(R[Q-1]);break;case 27:this.$=new W.MathFunction.HyperbolicTangent(R[Q-1]);break;case 28:this.$=new W.MathFunction.InverseHyperbolicSine(R[Q-1]);break;case 29:this.$=new W.MathFunction.InverseHyperbolicCosine(R[Q-1]);break;case 30:this.$=new W.MathFunction.InverseHyperbolicTangent(R[Q-1]);break;case 31:this.$=[R[Q]];break;case 32:this.$=R[Q-2].concat(R[Q]);break;}},table:[{3:1,4:2,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{1:[3]},{5:[1,27],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32]},{5:[2,2],11:[2,2],12:[2,2],13:[2,2],14:[2,2],15:[2,2],16:[2,2],36:[2,2]},{5:[2,3],11:[2,3],12:[2,3],13:[2,3],14:[2,3],15:[2,3],16:[2,3],36:[2,3]},{5:[2,4],11:[2,4],12:[2,4],13:[2,4],14:[2,4],15:[2,4],16:[2,4],36:[2,4]},{5:[2,5],11:[2,5],12:[2,5],13:[2,5],14:[2,5],15:[2,5],16:[2,5],36:[2,5]},{4:33,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:34,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{10:[1,35]},{10:[1,36]},{10:[1,37]},{10:[1,38]},{10:[1,39]},{10:[1,40]},{10:[1,41]},{10:[1,42]},{10:[1,43]},{10:[1,44]},{10:[1,45]},{10:[1,46]},{10:[1,47]},{10:[1,48]},{10:[1,49]},{10:[1,50]},{10:[1,51]},{10:[1,52]},{1:[2,1]},{4:53,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:54,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:55,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:56,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:57,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{11:[1,58],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32]},{5:[2,12],11:[2,12],12:[2,12],13:[2,12],14:[2,12],15:[2,12],16:[2,12],36:[2,12]},{4:59,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:60,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:62,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],20:61,21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:62,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],20:63,21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:64,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:65,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:66,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:67,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:68,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:69,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:70,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:71,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:72,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:73,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:74,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:75,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:76,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{4:77,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{5:[2,7],11:[2,7],12:[2,7],13:[2,7],14:[1,30],15:[1,31],16:[1,32],36:[2,7]},{5:[2,8],11:[2,8],12:[2,8],13:[2,8],14:[1,30],15:[1,31],16:[1,32],36:[2,8]},{5:[2,9],11:[2,9],12:[2,9],13:[2,9],14:[2,9],15:[2,9],16:[1,32],36:[2,9]},{5:[2,10],11:[2,10],12:[2,10],13:[2,10],14:[2,10],15:[2,10],16:[1,32],36:[2,10]},{5:[2,11],11:[2,11],12:[2,11],13:[2,11],14:[2,11],15:[2,11],16:[2,11],36:[2,11]},{5:[2,6],11:[2,6],12:[2,6],13:[2,6],14:[2,6],15:[2,6],16:[2,6],36:[2,6]},{11:[1,78],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32]},{11:[1,79],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32]},{11:[1,80],36:[1,81]},{11:[2,31],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32],36:[2,31]},{11:[1,82],36:[1,81]},{11:[1,83],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32]},{11:[1,84],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32]},{11:[1,85],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32]},{11:[1,86],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32]},{11:[1,87],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32]},{11:[1,88],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32]},{11:[1,89],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32]},{11:[1,90],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32]},{11:[1,91],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32]},{11:[1,92],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32]},{11:[1,93],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32]},{11:[1,94],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32]},{11:[1,95],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32]},{11:[1,96],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32]},{5:[2,13],11:[2,13],12:[2,13],13:[2,13],14:[2,13],15:[2,13],16:[2,13],36:[2,13]},{5:[2,14],11:[2,14],12:[2,14],13:[2,14],14:[2,14],15:[2,14],16:[2,14],36:[2,14]},{5:[2,15],11:[2,15],12:[2,15],13:[2,15],14:[2,15],15:[2,15],16:[2,15],36:[2,15]},{4:97,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],13:[1,8],17:[1,9],18:[1,10],19:[1,11],21:[1,12],22:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26]},{5:[2,16],11:[2,16],12:[2,16],13:[2,16],14:[2,16],15:[2,16],16:[2,16],36:[2,16]},{5:[2,17],11:[2,17],12:[2,17],13:[2,17],14:[2,17],15:[2,17],16:[2,17],36:[2,17]},{5:[2,18],11:[2,18],12:[2,18],13:[2,18],14:[2,18],15:[2,18],16:[2,18],36:[2,18]},{5:[2,19],11:[2,19],12:[2,19],13:[2,19],14:[2,19],15:[2,19],16:[2,19],36:[2,19]},{5:[2,20],11:[2,20],12:[2,20],13:[2,20],14:[2,20],15:[2,20],16:[2,20],36:[2,20]},{5:[2,21],11:[2,21],12:[2,21],13:[2,21],14:[2,21],15:[2,21],16:[2,21],36:[2,21]},{5:[2,22],11:[2,22],12:[2,22],13:[2,22],14:[2,22],15:[2,22],16:[2,22],36:[2,22]},{5:[2,23],11:[2,23],12:[2,23],13:[2,23],14:[2,23],15:[2,23],16:[2,23],36:[2,23]},{5:[2,24],11:[2,24],12:[2,24],13:[2,24],14:[2,24],15:[2,24],16:[2,24],36:[2,24]},{5:[2,25],11:[2,25],12:[2,25],13:[2,25],14:[2,25],15:[2,25],16:[2,25],36:[2,25]},{5:[2,26],11:[2,26],12:[2,26],13:[2,26],14:[2,26],15:[2,26],16:[2,26],36:[2,26]},{5:[2,27],11:[2,27],12:[2,27],13:[2,27],14:[2,27],15:[2,27],16:[2,27],36:[2,27]},{5:[2,28],11:[2,28],12:[2,28],13:[2,28],14:[2,28],15:[2,28],16:[2,28],36:[2,28]},{5:[2,29],11:[2,29],12:[2,29],13:[2,29],14:[2,29],15:[2,29],16:[2,29],36:[2,29]},{5:[2,30],11:[2,30],12:[2,30],13:[2,30],14:[2,30],15:[2,30],16:[2,30],36:[2,30]},{11:[2,32],12:[1,28],13:[1,29],14:[1,30],15:[1,31],16:[1,32],36:[2,32]}],defaultActions:{27:[2,1]},parseError:function M(Q,P){throw new Error(Q);
},parse:function N(X){var ae=this,U=[0],an=[null],Z=[],ao=this.table,Q="",Y=0,al=0,S=0,W=2,ab=1;this.lexer.setInput(X);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;if(typeof this.lexer.yylloc=="undefined"){this.lexer.yylloc={};}var R=this.lexer.yylloc;Z.push(R);if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError;}function ad(aq){U.length=U.length-2*aq;an.length=an.length-aq;Z.length=Z.length-aq;}function ac(){var aq;aq=ae.lexer.lex()||1;if(typeof aq!=="number"){aq=ae.symbols_[aq]||aq;}return aq;}var ak,ag,T,aj,ap,aa,ai={},af,am,P,V;while(true){T=U[U.length-1];if(this.defaultActions[T]){aj=this.defaultActions[T];}else{if(ak==null){ak=ac();}aj=ao[T]&&ao[T][ak];}if(typeof aj==="undefined"||!aj.length||!aj[0]){if(!S){V=[];for(af in ao[T]){if(this.terminals_[af]&&af>2){V.push("'"+this.terminals_[af]+"'");}}var ah="";if(this.lexer.showPosition){ah="Parse error on line "+(Y+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+V.join(", ");}else{ah="Parse error on line "+(Y+1)+": Unexpected "+(ak==1?"end of input":("'"+(this.terminals_[ak]||ak)+"'"));}this.parseError(ah,{text:this.lexer.match,token:this.terminals_[ak]||ak,line:this.lexer.yylineno,loc:R,expected:V});}if(S==3){if(ak==ab){throw new Error(ah||"Parsing halted.");}al=this.lexer.yyleng;Q=this.lexer.yytext;Y=this.lexer.yylineno;R=this.lexer.yylloc;ak=ac();}while(1){if((W.toString()) in ao[T]){break;}if(T==0){throw new Error(ah||"Parsing halted.");}ad(1);T=U[U.length-1];}ag=ak;ak=W;T=U[U.length-1];aj=ao[T]&&ao[T][W];S=3;}if(aj[0] instanceof Array&&aj.length>1){throw new Error("Parse Error: multiple actions possible at state: "+T+", token: "+ak);}switch(aj[0]){case 1:U.push(ak);an.push(this.lexer.yytext);Z.push(this.lexer.yylloc);U.push(aj[1]);ak=null;if(!ag){al=this.lexer.yyleng;Q=this.lexer.yytext;Y=this.lexer.yylineno;R=this.lexer.yylloc;if(S>0){S--;}}else{ak=ag;ag=null;}break;case 2:am=this.productions_[aj[1]][1];ai.$=an[an.length-am];ai._$={first_line:Z[Z.length-(am||1)].first_line,last_line:Z[Z.length-1].last_line,first_column:Z[Z.length-(am||1)].first_column,last_column:Z[Z.length-1].last_column};aa=this.performAction.call(ai,Q,al,Y,this.yy,aj[1],an,Z);if(typeof aa!=="undefined"){return aa;}if(am){U=U.slice(0,-1*am*2);an=an.slice(0,-1*am);Z=Z.slice(0,-1*am);}U.push(this.productions_[aj[1]][0]);an.push(ai.$);Z.push(ai._$);P=ao[U[U.length-2]][U[U.length-1]];U.push(P);break;case 3:return true;}}return true;}};var J=(function(){var S=({EOF:1,parseError:function U(X,W){if(this.yy.parseError){this.yy.parseError(X,W);}else{throw new Error(X);}},setInput:function(W){this._input=W;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};return this;},input:function(){var X=this._input[0];this.yytext+=X;this.yyleng++;this.match+=X;this.matched+=X;var W=X.match(/\n/);if(W){this.yylineno++;}this._input=this._input.slice(1);return X;},unput:function(W){this._input=W+this._input;return this;},more:function(){this._more=true;return this;},pastInput:function(){var W=this.matched.substr(0,this.matched.length-this.match.length);return(W.length>20?"...":"")+W.substr(-20).replace(/\n/g,"");},upcomingInput:function(){var W=this.match;if(W.length<20){W+=this._input.substr(0,20-W.length);}return(W.substr(0,20)+(W.length>20?"...":"")).replace(/\n/g,"");},showPosition:function(){var W=this.pastInput();var X=new Array(W.length+1).join("-");return W+this.upcomingInput()+"\n"+X+"^";},next:function(){if(this.done){return this.EOF;}if(!this._input){this.done=true;}var aa,Y,X,W;if(!this._more){this.yytext="";this.match="";}var ab=this._currentRules();for(var Z=0;Z<ab.length;Z++){Y=this._input.match(this.rules[ab[Z]]);if(Y){W=Y[0].match(/\n.*/g);if(W){this.yylineno+=W.length;}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:W?W[W.length-1].length-1:this.yylloc.last_column+Y[0].length};this.yytext+=Y[0];this.match+=Y[0];this.matches=Y;this.yyleng=this.yytext.length;this._more=false;this._input=this._input.slice(Y[0].length);this.matched+=Y[0];aa=this.performAction.call(this,this.yy,this,ab[Z],this.conditionStack[this.conditionStack.length-1]);if(aa){return aa;}else{return;}}}if(this._input===""){return this.EOF;}else{this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno});}},lex:function P(){var W=this.next();if(typeof W!=="undefined"){return W;}else{return this.lex();}},begin:function Q(W){this.conditionStack.push(W);},popState:function V(){return this.conditionStack.pop();},_currentRules:function T(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules;}});S.performAction=function R(aa,X,Z,W){var Y=W;switch(Z){case 0:return 6;break;case 1:return 8;break;case 2:return 7;break;case 3:return 9;break;case 4:return 14;break;case 5:return 15;break;case 6:return 13;break;case 7:return 12;break;case 8:return 16;break;case 9:return 10;break;case 10:return 11;break;case 11:return 36;break;case 12:return 17;break;case 13:return 18;break;case 14:return 21;break;case 15:return 19;break;case 16:return 22;break;case 17:return 23;break;case 18:return 24;break;case 19:return 25;break;case 20:return 26;break;case 21:return 27;break;case 22:return 28;break;case 23:return 29;break;case 24:return 30;break;case 25:return 31;break;case 26:return 32;break;case 27:return 33;break;case 28:return 34;break;case 29:return 35;break;case 30:break;case 31:return 5;break;}};S.rules=[/^[0-9]+(\.[0-9]+)?\b\b/,/^pi\b/,/^e\b/,/^i\b/,/^\*/,/^\//,/^-/,/^\+/,/^\^/,/^\(/,/^\)/,/^,/,/^abs\b/,/^phase\b/,/^max\b/,/^min\b/,/^sqrt\b/,/^ln\b/,/^arcsin\b/,/^arccos\b/,/^arctan\b/,/^sin\b/,/^cos\b/,/^tan\b/,/^sinh\b/,/^cosh\b/,/^tanh\b/,/^arcsinh\b/,/^arccosh\b/,/^arctanh\b/,/^\s+/,/^$/];S.conditions={"INITIAL":{"rules":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],"inclusive":true}};
return S;})();O.lexer=J;return O;})();if(typeof require!=="undefined"&&typeof exports!=="undefined"){exports.parser=D;exports.parse=function(){return D.parse.apply(D,arguments);};exports.main=function s(J){if(!J[1]){throw new Error("Usage: "+J[0]+" FILE");}if(typeof process!=="undefined"){var L=require("fs").readFileSync(require("path").join(process.cwd(),J[1]),"utf8");}else{var K=require("file").path(require("file").cwd());var L=K.join(J[1]).read({charset:"utf-8"});}return exports.parser.parse(L);};if(typeof module!=="undefined"&&require.main===module){exports.main(typeof process!=="undefined"?process.argv.slice(1):require("system").args);}}function F(J){F.superclass.constructor.call(this,J);}F.NAME="MathCanvas";F.ATTRS={func:{value:new c.MathFunction.Value(0),setter:function(J){return c.Lang.isString(J)?c.MathCanvas.Parser.parse(J):J;}},fontname:{value:"sans-serif",validator:c.Lang.isString},fontsize:{value:1,validator:c.Lang.isNumber},minwidth:{value:100,validator:c.Lang.isNumber},minheight:{value:100,validator:c.Lang.isNumber}};function z(J,K){if(J&&J.newVal){J=J.newVal;}else{if(!J){J=this.get("min"+K);}}J=Math.max(J,this["render_"+K]+5);this.set(K,J+"px");this.canvas.setAttribute(K,J);}c.extend(F,c.Widget,{initializer:function(J){this.after("funcChange",this._renderExpression);},renderUI:function(){var K=this.get("contentBox");this.on("minwidthChange",z,this,"width");this.on("minheightChange",z,this,"height");var J=this.get("minwidth");this.set("width",J+"px");var L=this.get("minheight");this.set("height",J+"px");this.canvas=c.Node.create('<canvas width="'+J+'" height="'+L+'" tabindex="0"></canvas>');K.appendChild(this.canvas);this.context=new c.Canvas.Context2d(this.canvas);c.mix(this.context,u);this.context.math_canvas=this;this._renderExpression();},destructor:function(){this.canvas=null;this.context=null;},_renderExpression:function(){this.context.clearRect(0,0,this.canvas.getAttribute("width"),this.canvas.getAttribute("height"));var L=this.get("func");if(!L){return;}this.rect_list=new e();var J={x:0,y:0};L.prepareToRender(this.context,J,100,this.rect_list);var K=this.rect_list.getBounds();this.render_width=e.width(K);z.call(this,null,"width");this.render_height=e.height(K);z.call(this,null,"height");this.context.save();this.context.translate(Math.floor((this.canvas.getAttribute("width")-(K.right-K.left))/2),Math.floor((this.canvas.getAttribute("height")-(K.bottom-K.top))/2));L.render(this.context,this.rect_list);this.context.restore();}});var v=Math.PI/6;var u={drawString:function(N,K,J,M){var L=this.getLineHeight(J);this._setFont(J);this.set("textBaseline","top");this.fillText(M,N,Math.floor(K-L/2));},getLineHeight:function(J){return(13*this.math_canvas.get("fontsize")*J/100);},getStringWidth:function(J,L){this.save();this._setFont(J);var K=this.measureText(L).width;this.restore();return K;},_setFont:function(J){this.set("font",(this.math_canvas.get("fontsize")*J/100)+"em "+this.math_canvas.get("fontname"));},drawSquareBrackets:function(L){var K=L.bottom-L.top;var J=this.getSquareBracketWidth(L)-2;this.moveTo(L.left-2,L.top);this.line(-J,0);this.line(0,K-1);this.line(J,0);this.stroke();this.moveTo(L.right+1,L.top);this.line(J,0);this.line(0,K-1);this.line(-J,0);this.stroke();},getSquareBracketWidth:function(K){var J=K.bottom-K.top;return Math.round(3+((J-1)/10));},drawParentheses:function(N){var M=N.bottom-N.top;var J=M/(2*Math.sin(v));var K=Math.round(J);var O=e.ycenter(N);var L=this.getParenthesisWidth(N);this.beginPath();this.arc(N.left-L+J,O,K,Math.PI-v,Math.PI+v,false);this.stroke();this.beginPath();this.arc(N.right+L-J,O,K,v,-v,true);this.stroke();},getParenthesisWidth:function(K){var J=K.bottom-K.top;return 2+Math.round(0.5+(J*(1-Math.cos(v)))/(2*Math.sin(v)));},drawVerticalBar:function(J){this.moveTo(J.left+1,J.top);this.lineTo(J.left+1,J.bottom);this.stroke();},getVerticalBarWidth:function(){return 3;}};D.yy.MathFunction=c.MathFunction;c.MathCanvas=F;c.MathCanvas.RectList=e;c.MathCanvas.Parser=D;},"@VERSION@",{requires:["widget","collection","gallery-complexnumber","gallery-canvas"]});