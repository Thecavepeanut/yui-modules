YUI.add("gallery-input-calendar-sync",function(d){function c(e){c.superclass.constructor.call(this,e);}c.NAME="InputCalendarSyncPlugin";c.NS="calendarSync";c.ATTRS={calendar:{validator:function(e){return(e instanceof d.Calendar);}}};function b(){var g=this.get("host"),i=this.get("calendar"),h=d.Lang.trim(g.get("value"));if(h){try{this.ignore_selection_change=true;var e=d.DateTimeUtils.normalize(d.DateTimeUtils.parseDate(h),{hour:0,minute:0});i.deselectDates();i.selectDates(e.date);i.set("date",e.date);this.ignore_selection_change=false;}catch(f){this.ignore_selection_change=false;}}a.call(this);}function a(){if(!this.ignore_selection_change){var e=this.get("calendar").get("selectedDates")[0];this.get("host").set("value",d.DateTimeUtils.formatDate(e));}}d.extend(c,d.Plugin.Base,{initializer:function(e){var f=this.get("host");this.change_handle=f.on("change",b,this);this.cal_handle=this.get("calendar").on("selectionChange",a,this);this.get("calendar").set("selectionMode","single");b.call(this);},destructor:function(){this.change_handle.detach();this.cal_handle.detach();}});d.namespace("Plugin");d.Plugin.InputCalendarSync=c;},"@VERSION@",{requires:["node-pluginhost","plugin","gallery-datetime-utils","calendar"]});