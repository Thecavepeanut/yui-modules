YUI.add("gallery-anim-sequence",function(e,t){"use strict";function n(e){this._list=[],n.superclass.constructor.apply(this,arguments)}function r(){if(this.get("paused"))return;var t=this.get("reverse");if(!t&&this._index>=this._list.length||t&&this._index<0){var n=this.get("iterations"),i=this.get("iterationCount")+1;n=="infinite"||i<n?(this.get("direction")=="alternate"&&this.set("reverse",!t),this._set("iterationCount",i),this._index=this.get("reverse")?this._list.length-1:0,r.call(this)):(this._set("running",!1),this.fire("end"));return}var s=this._list[this._index];if(e.Lang.isArray(s)){var o=new e.Parallel;e.each(s,function(e){e.once("end",o.add()),e.set("reverse",t),e.run()},this),o.done(e.bind(r,this))}else if(s instanceof e.Anim||s instanceof e.AnimSequence)s.once("end",r,this),s.set("reverse",t),s.run();else if(e.Lang.isFunction(s))e.later(0,this,function(){s.call(null,t),r.call(this)});else{if(!e.Lang.isNumber(s))throw Error("unknown item type in sequence: "+s);e.later(s,this,r)}this._index+=t?-1:1}function s(t){e.Lang.isArray(t)?e.each(t,function(e){e.set("node",this._host)},this):t instanceof e.Anim&&t.set("node",this._host)}n.NAME="AnimSequence",n.ATTRS={reverse:{value:!1,validator:e.Lang.isBoolean},iterations:{value:1,validator:function(t){return e.Lang.isNumber(t)||t=="infinite"}},iterationCount:{value:0,readOnly:!0},direction:{value:"normal",validator:function(e){return e=="normal"||e=="alternate"}},running:{value:!1,validator:e.Lang.isBoolean,readOnly:!0},paused:{value:!1,validator:e.Lang.isBoolean,readOnly:!0}},e.extend(n,e.Base,{initializer:function(t){e.Lang.isArray(t.sequence)&&this.append.apply(this,t.sequence)},append:function(t){arguments.length==1?this._list.push(t):e.each(e.Array(arguments),function(t){this._list.push(t)},this)},prepend:function(t){arguments.length==1?this._list.unshift(t):e.each(e.Array(arguments),function(t){this._list.unshift(t)},this)},run:function(){return this.get("paused")?(this._set("paused",!1),this.fire("resume")):(this._set("iterationCount",0),this._set("running",!0),this.fire("start"),this._index=this.get("reverse")?this._list.length-1:0),r.call(this),this},stop:function(t){this._set("running",!1),this._set("paused",!1);for(var n=this._index;n<this._list.length;n++){var r=this._list[n];if(e.Lang.isArray(r))e.each(r,function(e){e.run(),e.stop(t)},this);else if(r instanceof e.Anim||r instanceof e.AnimSequence)r.run(),r.stop(t);if(!t)break}return this.fire("end"),this},pause:function(){this._set("paused",!0);var t=this._list[this._index];return e.Lang.isArray(t)?e.each(t,function(e){e.pause()},this):(t instanceof e.Anim||t instanceof e.AnimSequence)&&t.pause(),this.fire("pause"),this}}),e.AnimSequence=n;var i=function(e){this._host=e.host,i.superclass.constructor.apply(this,arguments)};i.NAME="nodefxseq",i.NS="fx",e.extend(i,e.AnimSequence,{append:function(t){arguments.length>1?e.each(arguments,s,this):s.call(this,t),i.superclass.append.apply(this,arguments)},prepend:function(t){arguments.length>1?e.each(arguments,s,this):s.call(this,t),i.superclass.prepend.apply(this,arguments)}}),e.namespace("Plugin"),e.Plugin.NodeFXSequence=i},"@VERSION@",{requires:["anim-base","parallel","node-pluginhost"]});
